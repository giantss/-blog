<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>react native å¼ºå¤§çš„navigation V2.0+</title>
      <link href="/blog/2018/10/10/react-native-%E5%BC%BA%E5%A4%A7%E7%9A%84navigation-V2-0/"/>
      <url>/blog/2018/10/10/react-native-%E5%BC%BA%E5%A4%A7%E7%9A%84navigation-V2-0/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p> ç¬”è€…åœ¨V2ç‰ˆä¹‹å‰ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ <code>1.5.1</code>ï¼Œç°é¡¹ç›®ä¸­å‡çº§åˆ°<code>2.6.2</code>ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä½¿ç”¨è¿™ä¸¤ä¸ªç‰ˆæœ¬çš„ä¸€äº›ç»éªŒï¼Œåˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›èŠ‚çœå¤§å®¶ä¸€äº›å®è´µçš„æ—¶é—´ã€‚</p><h1 id="æ³¨æ„-ä¼˜åŒ–é¡¹"><a href="#æ³¨æ„-ä¼˜åŒ–é¡¹" class="headerlink" title="æ³¨æ„/ä¼˜åŒ–é¡¹"></a>æ³¨æ„/ä¼˜åŒ–é¡¹</h1><h4 id="å¯¼èˆªå™¨å¯¼å‡ºåå­—æ”¹å˜"><a href="#å¯¼èˆªå™¨å¯¼å‡ºåå­—æ”¹å˜" class="headerlink" title="å¯¼èˆªå™¨å¯¼å‡ºåå­—æ”¹å˜"></a>å¯¼èˆªå™¨å¯¼å‡ºåå­—æ”¹å˜</h4><p>å‡çº§å‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; StackNavigator, TabNavigator, DrawerNavigator&#125; from &apos;react-navigation&apos;</span><br></pre></td></tr></table></figure></p><p>å‡çº§åï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123;  createStackNavigator, createBottomTabNavigator, createDrawerNavigator &#125; from &apos;react-navigation&apos;</span><br></pre></td></tr></table></figure></p><a id="more"></a><h4 id="æ–°å¢getParam-â€˜idâ€™-â€˜é»˜è®¤å€¼â€™"><a href="#æ–°å¢getParam-â€˜idâ€™-â€˜é»˜è®¤å€¼â€™" class="headerlink" title="æ–°å¢getParam(â€˜idâ€™, â€˜é»˜è®¤å€¼â€™);"></a>æ–°å¢getParam(â€˜idâ€™, â€˜é»˜è®¤å€¼â€™);</h4><p>é€šè¿‡<code>navigate</code>ä¼ é¤åˆ°ä¸‹ä¸€ä¸ªç•Œé¢å¯ä»¥è®¾ç½®é»˜è®¤å€¼äº†ï¼Œå†ä¹Ÿä¸ç”¨åœ¨æ¥å—çš„ç•Œé¢ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼åˆ¤æ–­ä¼ å…¥å€¼æ˜¯å¦å­˜åœ¨äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let &#123;navigation&#125; = this.props;</span><br><span class="line">        this.state = &#123;</span><br><span class="line">            id: navigation.getParam(&apos;id&apos;, 0) //å¦‚æœæ²¡æœ‰æ¥æ”¶åˆ°idï¼Œç»™idèµ‹å€¼ä¸º0</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p><h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><p>æˆ‘åœ¨ä½¿ç”¨ <code>1.5.1</code>ç‰ˆçš„æ—¶å€™é‡åˆ°è¿‡ä¸‹é¢è¿™æ ·çš„éœ€æ±‚ï¼š</p><blockquote><p>éœ€æ±‚ä¸€ï¼šç•Œé¢è·³è½¬ï¼šéœ€è¦å®ç° <code>Aâ€”â€”&gt;B</code>   <code>Bâ€”â€”&gt;C</code>   <code>Câ€”â€”&gt;A</code>ï¼Œç”šè‡³æ›´æ·±å±‚æ¬¡çš„ç•Œé¢è·³è½¬åˆ°<code>A</code>ã€‚</p></blockquote><blockquote><p>éœ€æ±‚äºŒï¼šéœ€è¦ä½¿ç”¨å¤šä¸ªå¯¼èˆªå™¨ï¼Œè€Œä¸”ç›¸äº’ä¹‹é—´ä¸å½±å“ã€‚(å¼•å¯¼é¡µï¼Œç™»é™†ï¼Œæ³¨å†Œï¼Œå¿˜è®°å¯†ç çš„ç­‰ç•Œé¢çš„å®ç°)ã€‚</p></blockquote><blockquote><p>éœ€æ±‚ä¸‰ï¼šä¸€ä¸ªç•Œé¢å¤šæ¬¡è¢«ä½¿ç”¨ï¼Œï¼ˆæ¯”å¦‚ä¸€ä¸ªç¤¾äº¤çš„<code>å¸–å­è¯¦æƒ…</code>ï¼Œç‚¹å‡»å¤´åƒè¿›å…¥<code>ä¸ªäººä¸»é¡µ</code>ï¼Œåœ¨<code>ä¸ªäººä¸»é¡µ</code>ä¸­ç‚¹å‡»å¸–å­ï¼Œåˆè¿›å…¥åˆ°<code>å¸–å­è¯¦æƒ…</code>ï¼Œç„¶åå†ç‚¹å‡»å¸–å­ä¸­çš„å¤´åƒè¿›å…¥åˆ°<code>ä¸ªäººä¸»é¡µ</code>ã€‚è¿™æ ·<code>å¸–å­è¯¦æƒ…</code> <code>ä¸ªäººä¸»é¡µ</code>ä¸¤ä¸ªç•Œé¢ä¼šè¢«æ— é™å¾ªç¯è°ƒç”¨ï¼‰ã€‚</p></blockquote><blockquote><p>éœ€æ±‚å››ï¼šå¿«é€Ÿç‚¹å‡»æ—¶è·³è½¬ä¸‹ä¸ªç•Œé¢ï¼Œä¸è¦è·³è½¬å¤šä¸ªç›¸åŒçš„ç•Œé¢ï¼ˆè¿™åº”è¯¥ç®—<code>V1+</code>çš„ä¸€ä¸ªç¼ºé™·ï¼‰ã€‚</p></blockquote><p><strong><em>æ¥ä¸‹æ¥æˆ‘å°±æ ¹æ®ä¸Šé¢çš„å‡ ä¸ªéœ€æ±‚æ¥åˆ†æåœ¨ <code>V1.0+</code> å’Œ<code>V2.0+</code> åˆ†åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼š</em></strong></p><blockquote><p>éœ€æ±‚ä¸€ <code>V1.0+</code>ï¼š</p><p>æˆ‘çš„å®ç°æ€è·¯æ˜¯ï¼š<br>ä½¿ç”¨<code>DeviceEventEmitter</code>åœ¨Bç•Œé¢æ³¨å†Œäº†ä¸€ä¸ªè¿”å›ä¸Šä¸€ä¸ªç•Œé¢çš„<code>goback</code>äº‹ä»¶, äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œ<code>this.props.naviagtion.goBack();</code>ï¼Œç„¶ååœ¨Cç•Œé¢å…ˆè°ƒç”¨<code>DeviceEventEmitter.emit(&#39;Bç•Œé¢æ³¨å†Œçš„äº‹ä»¶å&#39;)</code>ï¼Œç„¶åå†è°ƒç”¨ <code>this.props.naviagtion.goBack()</code>å°±èƒ½è¾¾åˆ°  <code>Câ€”â€”&gt;A</code>çš„æ•ˆæœã€‚è™½ç„¶å®ç°äº†ï¼Œä½†æ˜¯å¿ƒé‡Œæš—åœ°é‡Œè¯´äº†ä¸€å¥mmpã€‚</p><p>éœ€æ±‚ä¸€<code>V2.0+</code>ï¼š</p><p>ç›´æ¥åœ¨<code>C</code>ç•Œé¢è°ƒç”¨<code>this.props.naviagtion.navigate(&#39;A&#39;)</code>å°±å¯ä»¥å®ç° <code>Câ€”â€”&gt;A</code>çš„æ•ˆæœï¼Œå¦‚æœAæ˜¯é¦–é¡µçš„è¯å¯ä»¥è°ƒç”¨<code>this.props.naviagtion.popToTop()</code>ã€‚</p></blockquote><blockquote><p>éœ€æ±‚äºŒ<code>V1.0+</code>ï¼š</p><p>ç™»é™†æ³¨å†Œç•Œé¢ï¼šä½¿ç”¨çš„æ˜¯<code>Modal</code>ç»„ä»¶ï¼Œè‡ªå®šä¹‰çš„å…¨å±æ‚¬æµ®çª—ã€‚</p><p>éœ€æ±‚äºŒ<code>V2.0+</code>ï¼š</p><p>åœ¨<code>V2.0</code>ä¸­æä¾›äº†ä¸€ä¸ª<code>createSwitchNavigator</code>,è¿™ä¸ªç»„ä»¶çš„ä½œç”¨ä¸ªäººçš„ç†è§£æ˜¯å¯¼èˆªå™¨åˆ†ç¦»ï¼Œæ°¸è¿œåªå±•ç¤ºä¸€ä¸ªå¯¼èˆªå™¨ï¼Œä½ å¯ä»¥è®¾ç½®å¤šä¸ªå¯¼èˆªå™¨ï¼Œå¹¶ä¸”å½“å¤šä¸ªå¯¼èˆªå™¨ç›¸äº’åˆ‡æ¢çš„æ—¶å€™éƒ½ä¼šé”€æ¯æ‰å…¶ä»–å¯¼èˆªå™¨ã€‚ï¼ˆå¦‚ä½•åµŒå¥—å®ç°è¯·çœ‹æœ€åé¢çš„ä»£ç ï¼‰</p></blockquote><blockquote><p>éœ€æ±‚ä¸‰<code>V1.0+</code>ï¼š</p><p>æ­£å¸¸ä½¿ç”¨<code>this.props.navigation.navigate(&#39;A&#39;)</code>å¯ä»¥å®ç°è¿™ç§æ•ˆæœï¼ˆä½†æ˜¯ç‚¹å‡»å¤ªå¿«ä¼šå¤šæ¬¡å¯¼èˆªåˆ°åŒä¸€ä¸ªç•Œé¢ï¼‰ã€‚</p><p>éœ€æ±‚ä¸‰<code>V2.0+</code>ï¼š</p><p>éœ€è¦æ³¨æ„çš„æ˜¯<code>V2.0+</code>å®ç°è¿™ç§æ•ˆæœéœ€è¦è°ƒç”¨ <code>this.props.navigation.push(&#39;A&#39;)</code>,å¦‚æœè°ƒç”¨äº†<code>this.props.navigation.navigate(&#39;A&#39;)</code>ä½ ä¼šå‘ç°å½“<code>A</code>å·²ç»åœ¨å¯¼èˆªæ ˆä¸­ç•Œé¢è·³è½¬æ•ˆæœæ˜¯è¿”å›åˆ°è¿™ä¸ªç•Œé¢çš„æ•ˆæœï¼›å¦‚æœ<code>A</code>æ˜¯å½“å‰ç•Œé¢ï¼Œå†æ¬¡è°ƒç”¨<code>navigate(&#39;A&#39;)</code>æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œä½†æ˜¯<code>push(&#39;A&#39;)</code>è¿˜å¯ä»¥ç»§ç»­å¯¼èˆªåˆ°<code>A</code>ç•Œé¢ã€‚</p></blockquote><blockquote><p>éœ€æ±‚å››<code>V1.0+</code>ï¼š</p><p>è§£å†³æ–¹æ¡ˆï¼šåœ¨ä½ é…ç½®å¯¼èˆªå™¨çš„<code>.js</code>æ–‡ä»¶æœ€ä¸‹é¢ <code>export default xxx</code>ä¹‹å‰ç²˜è´´ä¸‹é¢çš„ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**è§£å†³ç‚¹å‡»å¤ªå¿«è·³è½¬è¿ç»­è·³è½¬å¤šä¸ªç•Œé¢**/</span><br><span class="line"></span><br><span class="line">   //ä¸»è¦æ˜¯è¿™ä¸€æ­¥</span><br><span class="line">   const navigateOnce = (getStateForAction) =&gt; (action, state) =&gt; &#123;</span><br><span class="line">       const &#123;type, routeName&#125; = action;</span><br><span class="line">       return (</span><br><span class="line">           state &amp;&amp;</span><br><span class="line">           type === NavigationActions.NAVIGATE &amp;&amp;</span><br><span class="line">           routeName === state.routes[state.routes.length - 1].routeName</span><br><span class="line">       ) ? null : getStateForAction(action, state);</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">   //è¿™æ˜¯ç¬¬äºŒæ­¥</span><br><span class="line">   MainStackNavigator.router.getStateForAction = navigateOnce(MainStackNavigator.router.getStateForAction);</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>éœ€æ±‚å››<code>V2.0+</code>ï¼š</p><p>åªéœ€è¦æ­£å¸¸è°ƒç”¨<code>this.props.navigation.navigate(&#39;A&#39;)</code>å°±å¯ä»¥äº†ï¼Œå®˜æ–¹å·²ç»ä¿®å¤äº†è¿™ä¸ªbugã€‚</p></blockquote><h1 id="å„ç§å¯¼èˆªå™¨åµŒå¥—ä»£ç "><a href="#å„ç§å¯¼èˆªå™¨åµŒå¥—ä»£ç " class="headerlink" title="å„ç§å¯¼èˆªå™¨åµŒå¥—ä»£ç "></a>å„ç§å¯¼èˆªå™¨åµŒå¥—ä»£ç </h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import &#123;</span><br><span class="line">    createStackNavigator,</span><br><span class="line">    createBottomTabNavigator,</span><br><span class="line">    createDrawerNavigator,</span><br><span class="line">    createSwitchNavigator,</span><br><span class="line">&#125; from &apos;react-navigation&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const navigationOptions = &#123;</span><br><span class="line">    headerStyle:&#123;</span><br><span class="line">        backgroundColor: &apos;#fff&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    headerTintColor: &apos;#666666&apos;,</span><br><span class="line">    headerBackTitle: null,</span><br><span class="line">    headerTitleStyle: &#123;</span><br><span class="line">        fontWeight: &apos;bold&apos;,</span><br><span class="line">    &#125;,</span><br><span class="line">    drawerLockMode:&apos;locked-closed&apos; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">        //é¦–é¡µå¯¼èˆªå™¨</span><br><span class="line">const HomeStack = createStackNavigator(</span><br><span class="line">    &#123;</span><br><span class="line">        Home: HomeScreen,</span><br><span class="line">        HomeDetail: HomeDetailScreen,</span><br><span class="line">        //å…¶ä»–é¦–é¡µå¯¼èˆªæ ˆä¸‹çš„ç•Œé¢</span><br><span class="line">      </span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        navigationOptions:navigationOptions</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">        //æ–°é—»å¯¼èˆªå™¨</span><br><span class="line">const NewsStack = createStackNavigator(&#123;</span><br><span class="line">        News: NewsScreen,</span><br><span class="line">        NewsDetail: NewsDetailScreen,</span><br><span class="line">         //å…¶ä»–æ–°é—»å¯¼èˆªæ ˆä¸‹çš„ç•Œé¢</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        navigationOptions:navigationOptions</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    //ç™»é™†ã€æ³¨å†Œç­‰å¯¼èˆªå™¨</span><br><span class="line">const LoginStack = createStackNavigator(</span><br><span class="line">    &#123;</span><br><span class="line">        Login: LoginScreen,</span><br><span class="line">        Register: RegisterScreen,</span><br><span class="line">        Bind: BindScreen,</span><br><span class="line">        UserProtocol: UserProtocolScreen</span><br><span class="line">      //å…¶ä»–ç™»é™†å¯¼èˆªæ ˆä¸‹çš„ç•Œé¢</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        navigationOptions:navigationOptions</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //tabç‚¹å‡»åˆ‡æ¢å¯¼èˆªå™¨</span><br><span class="line">const Tab = createBottomTabNavigator(&#123;</span><br><span class="line">    Home: HomeStack,</span><br><span class="line">    News: NewsStack</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    initialRouteName: &apos;Home&apos;,</span><br><span class="line">    tabBarOptions: &#123;</span><br><span class="line">        showLabel: false,</span><br><span class="line">        style:&#123;</span><br><span class="line">            height:0 //éšè—åº•éƒ¨åˆ‡æ¢</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">    //ä¾§æ»‘å¯¼èˆªå™¨</span><br><span class="line">const drawerNavigator = createDrawerNavigator(&#123;</span><br><span class="line">    bottomTab: Tab,</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    drawerWidth: width-120,</span><br><span class="line">    contentComponent: CustomDrawerContentComponent</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //æœ€åå¯¼å‡ºSwitchå¯¼èˆªå™¨</span><br><span class="line">export default createSwitchNavigator(&#123;</span><br><span class="line">    drawerNavigator: drawerNavigator,</span><br><span class="line">    loginStack: LoginStack,</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p> <strong><em>æœ¬æ¬¡å†™ä½œåˆ°æ­¤ï¼Œæ¬¢è¿â¤ï¸â­ï¸ğŸ‘æŒ‡å‡ºé”™è¯¯æˆ–è€…å‘å¸ƒè‡ªå·±çš„è§è§£æ¢è®¨ï¼Œå…±å‹‰ã€‚ğŸ¤</em></strong></p><p>hello <a href="https://giantss.github.io/blog/2018/10/10/react-native-å¼ºå¤§çš„navigation-V2-0/">https://giantss.github.io/blog/2018/10/10/react-native-å¼ºå¤§çš„navigation-V2-0/</a> bye</p>]]></content>
      
      
      
        <tags>
            
            <tag> react native </tag>
            
            <tag> react navigation </tag>
            
            <tag> å‡çº§ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…³äºreact native ç¬¬ä¸‰æ–¹ç»„ä»¶å®‰è£…ã€å¸è½½çš„ä¸€äº›æ³¨æ„äº‹é¡¹</title>
      <link href="/blog/2018/10/10/%E5%85%B3%E4%BA%8Ereact-native-%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85%E3%80%81%E5%8D%B8%E8%BD%BD%E7%9A%84%E4%B8%80%E4%BA%9B%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/"/>
      <url>/blog/2018/10/10/%E5%85%B3%E4%BA%8Ereact-native-%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85%E3%80%81%E5%8D%B8%E8%BD%BD%E7%9A%84%E4%B8%80%E4%BA%9B%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä½¿ç”¨çš„react nativeç‰ˆæœ¬æ˜¯ 0.49.5ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°å®‰è£…ã€å¸è½½çš„æ“ä½œï¼Œä¸€ä¸å°å¿ƒï¼ˆæ²¡æœ‰å®‰è£…æµç¨‹åšï¼‰é¡¹ç›®è¿è¡Œçš„å°±ä¼šæŠ¥å„ç§é”™è¯¯ã€‚å»ºè®®åœ¨æŠŠç¬¬ä¸‰æ–¹ç»„ä»¶å¼•å…¥æ­£å¼é¡¹ç›®å·¥ç¨‹ä¹‹å‰å…ˆåœ¨demoå·¥ç¨‹ä¸­è·‘é€šï¼Œå¦è€…ä½ ä¼šæµªè´¹å¾ˆå¤šä¸å¿…è¦çš„æ—¶é—´ã€‚ä¸‹é¢æ˜¯æ­£å¸¸å®‰è£…ã€å¸è½½æµç¨‹ã€‚</p><h2 id="å®‰è£…ï¼š"><a href="#å®‰è£…ï¼š" class="headerlink" title="å®‰è£…ï¼š"></a>å®‰è£…ï¼š</h2><p>1ï¼Œæ­£ç¡®çš„å®‰è£…æ–¹å¼æ˜¯ <code>npm install xxx --save</code>ï¼Œç»å¸¸çœ‹åˆ°è®¸å¤šç»„ä»¶å®‰è£…æ–‡æ¡£ä¸Šåé¢æ²¡æœ‰ <code>--save</code>ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®åŠ ä¸Š å¦åˆ™ç»„ä»¶ä¿¡æ¯ä¸ä¼šå‡ºç°åœ¨<code>package.json</code>ä¸­ï¼Œå¯¼å…¥ç»„ä»¶çš„æ—¶å€™å¯èƒ½ä¼šæ‰¾ä¸åˆ°è·¯å¾„ã€‚</p><p>2ï¼Œå®‰è£…å®Œæˆåæ‰§è¡Œä¸€ä¸‹ <code>react-native link xxx</code>ã€‚<br><a id="more"></a></p><h2 id="å¸è½½ï¼š"><a href="#å¸è½½ï¼š" class="headerlink" title="å¸è½½ï¼š"></a>å¸è½½ï¼š</h2><p>1ï¼Œåœ¨å¸è½½ä¹‹å‰å…ˆæ‰§è¡Œ <code>react-native unlink xxx</code>ã€‚<br>2ï¼Œç„¶ååœ¨æ‰§è¡Œ <code>npm uninstall xxx --save</code> åˆ«å¿˜äº†åŠ <code>--save</code>ã€‚</p><p><strong><em>å¸è½½çš„æ—¶å€™ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœå¸è½½çš„ç»„ä»¶æœ‰<code>link</code>çš„ï¼Œ<code>uninstall</code>ä¹‹å‰ä¸€å®šè¦å…ˆ<code>unlink</code>ï¼Œå¦åˆ™è¿è¡Œé¡¹ç›®ä¼šæŠ¥é”™çš„ï¼ˆå¦‚æœä½ æ²¡æœ‰åœ¨<code>uninstall</code>ä¹‹å‰å…ˆ<code>unlink</code>ä¸”è¿è¡Œå·²ç»æŠ¥é”™äº†ï¼Œé‡æ–°æŒ‰ç…§å®‰è£…å¸è½½æµç¨‹å†èµ°ä¸€éå°±okäº†ï¼‰ã€‚</em></strong></p><p>hello <a href="https://giantss.github.io/blog/2018/10/10/å…³äºreact-native-ç¬¬ä¸‰æ–¹ç»„ä»¶å®‰è£…ã€å¸è½½çš„ä¸€äº›æ³¨æ„äº‹é¡¹/">https://giantss.github.io/blog/2018/10/10/å…³äºreact-native-ç¬¬ä¸‰æ–¹ç»„ä»¶å®‰è£…ã€å¸è½½çš„ä¸€äº›æ³¨æ„äº‹é¡¹/</a> bye</p>]]></content>
      
      
      
        <tags>
            
            <tag> react native </tag>
            
            <tag> ç¬¬ä¸‰ç»„ä»¶ </tag>
            
            <tag> å®‰è£… </tag>
            
            <tag> å¸è½½ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CSSä½¿ç”¨çš„ä¸€äº›å°æŠ€å·§/é«˜çº§è¿›é˜¶</title>
      <link href="/blog/2018/10/10/CSS%E4%BD%BF%E7%94%A8%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/"/>
      <url>/blog/2018/10/10/CSS%E4%BD%BF%E7%94%A8%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘é—²æš‡æ—¶é—´åœ¨çœ‹é‘«çˆ·çš„<a href="http://www.cssworld.cn/" target="_blank" rel="noopener">ã€ŠCSSä¸–ç•Œã€‹</a>ï¼Œå†…å®¹çœŸçš„æ˜¯éå¸¸ç²¾å½©ï¼Œå¾ˆå¤šç»†èŠ‚åˆ†æçš„éå¸¸é€å½»ï¼Œå€¼å¾—æ¨èã€‚åœ¨æ—¥å¸¸å¼€å‘ä¸­å®ç°æŸç§æ•ˆæœæœ‰å¾ˆå¤šæ–¹å¼ï¼Œä½†æ˜¯ä¸‹é¢çš„<code>css code</code>æˆ‘ä»¥å‰éƒ½å¾ˆå°‘ç”¨åˆ°ï¼ŒåŸæ¥cssè¿˜å¯ä»¥è¿™ä¹ˆç© ã€‚ã€‚</p><h2 id="å®ç°hoveræ”¹å˜æˆå¦ä¸€å¼ å›¾ç‰‡æ•ˆæœ"><a href="#å®ç°hoveræ”¹å˜æˆå¦ä¸€å¼ å›¾ç‰‡æ•ˆæœ" class="headerlink" title="å®ç°hoveræ”¹å˜æˆå¦ä¸€å¼ å›¾ç‰‡æ•ˆæœ"></a>å®ç°hoveræ”¹å˜æˆå¦ä¸€å¼ å›¾ç‰‡æ•ˆæœ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**css**/</span><br><span class="line">img: hover &#123; ã€€</span><br><span class="line">     content: url( laugh-tear. png);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">/**html code**/</span><br><span class="line">&lt; img src=&quot; laugh. png&quot;&gt;</span><br></pre></td></tr></table></figure><p><strong><em>å±€é™æ€§ï¼šcontent å±æ€§ æ”¹å˜ çš„ ä»…ä»…æ˜¯ è§†è§‰ å‘ˆç°ï¼Œ å½“ æˆ‘ä»¬ ä»¥ å³é”® æˆ– å…¶ä»– å½¢å¼ ä¿å­˜ è¿™å¼  å›¾ç‰‡ çš„ æ—¶å€™ï¼Œ æ‰€ ä¿å­˜ çš„ è¿˜æ˜¯ åŸæ¥ src å¯¹åº” çš„ å›¾ç‰‡ã€‚</em></strong></p><a id="more"></a><h2 id="æ˜¾ç¤ºç½‘ç«™logo"><a href="#æ˜¾ç¤ºç½‘ç«™logo" class="headerlink" title="æ˜¾ç¤ºç½‘ç«™logo"></a>æ˜¾ç¤ºç½‘ç«™logo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt; h1&gt;logo&lt;/ h1&gt;</span><br><span class="line"> h1 &#123; ã€€ </span><br><span class="line">   content: url( logo. svg);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼š</p><blockquote><p>1ï¼Œä¸ä¼šå½±å“ç½‘ç«™SEOã€‚</p><p>2ï¼Œä½¿ç”¨.svgçŸ¢é‡å›¾ä¸ºäº†é€‚åº”ç§»åŠ¨ ç«¯ retina å±å¹•ï¼ˆå¦‚æœç”¨.svgä¼šæ¨¡<br>ç³Šï¼‰ã€‚</p></blockquote><p><strong><em>æ³¨ï¼šåƒä¸‡ä¸è¦è‡ªä»¥ä¸ºæ˜¯åœ°æŠŠé‡è¦çš„æ–‡æœ¬ä¿¡æ¯ä½¿ç”¨content å±æ€§ç”Ÿæˆï¼Œå› ä¸ºè¿™å¯¹å¯è®¿é—®æ€§å’ŒSEOéƒ½å¾ˆä¸å‹å¥½ï¼Œcontent å±æ€§åªèƒ½ç”¨æ¥ç”Ÿæˆ ä¸€äº› æ— å…³ç´§è¦çš„å†…å®¹ï¼Œ å¦‚è£…é¥°æ€§å›¾å½¢æˆ–è€…åºå·ä¹‹ç±»ï¼› åŒæ ·ï¼Œä¹Ÿä¸è¦æ‹…å¿ƒ åŸæœ¬é‡è¦çš„æ–‡å­—ä¿¡æ¯ä¼šè¢«contentæ›¿æ¢ï¼Œæ›¿æ¢çš„ä»…ä»…æ˜¯è§†è§‰å±‚ã€‚</em></strong></p><h2 id="è®¾ç½®å†…å®¹æ— æ³•é€‰ä¸­ã€æ— æ³•å¤åˆ¶"><a href="#è®¾ç½®å†…å®¹æ— æ³•é€‰ä¸­ã€æ— æ³•å¤åˆ¶" class="headerlink" title="è®¾ç½®å†…å®¹æ— æ³•é€‰ä¸­ã€æ— æ³•å¤åˆ¶"></a>è®¾ç½®å†…å®¹æ— æ³•é€‰ä¸­ã€æ— æ³•å¤åˆ¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user-select: none</span><br></pre></td></tr></table></figure><h2 id="â€œä¸‰é“-æ â€-å°-å›¾æ ‡-ç¤ºæ„"><a href="#â€œä¸‰é“-æ â€-å°-å›¾æ ‡-ç¤ºæ„" class="headerlink" title="â€œä¸‰é“ æ â€ å° å›¾æ ‡ ç¤ºæ„"></a>â€œä¸‰é“ æ â€ å° å›¾æ ‡ ç¤ºæ„</h2><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd52c529c6?w=314&amp;h=270&amp;f=png&amp;s=300" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.icon-menu &#123; ã€€</span><br><span class="line">     display: inline-block; ã€€</span><br><span class="line">     width: 140px; </span><br><span class="line">     height: 10px; ã€€</span><br><span class="line">     padding: 35px 0; ã€€</span><br><span class="line">     border-top: 10px solid; ã€€</span><br><span class="line">     border-bottom: 10px solid; ã€€</span><br><span class="line">     background-color: currentColor; ã€€</span><br><span class="line">     background-clip: content-box; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒå±‚-åœ†ç‚¹-å›¾å½¢-ç¤ºæ„"><a href="#åŒå±‚-åœ†ç‚¹-å›¾å½¢-ç¤ºæ„" class="headerlink" title="åŒå±‚ åœ†ç‚¹ å›¾å½¢ ç¤ºæ„"></a>åŒå±‚ åœ†ç‚¹ å›¾å½¢ ç¤ºæ„</h2><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd53928d89?w=288&amp;h=280&amp;f=png&amp;s=300" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.icon-dot &#123; ã€€</span><br><span class="line">     display: inline-block; ã€€ </span><br><span class="line">      width: 100px; </span><br><span class="line">      height: 100px; ã€€ </span><br><span class="line">      padding: 10px; ã€€</span><br><span class="line">      border: 10px solid; ã€€ ã€€ ã€€ </span><br><span class="line">      border-radius: 50%; ã€€ </span><br><span class="line">      background-color: currentColor; ã€€ </span><br><span class="line">      background-clip: content-box; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å»æ‰æœ€å³è¾¹çš„margin-rightï¼š20"><a href="#å»æ‰æœ€å³è¾¹çš„margin-rightï¼š20" class="headerlink" title="å»æ‰æœ€å³è¾¹çš„margin-rightï¼š20"></a>å»æ‰æœ€å³è¾¹çš„margin-rightï¼š20</h2><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586ce1588a993?w=317&amp;h=209&amp;f=png&amp;s=908" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  /**æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨css3 nth-of-typeå±æ€§ï¼ˆä¸è€ƒè™‘å…¼å®¹IE8**/</span><br><span class="line">li: nth-of-type(3n) &#123; </span><br><span class="line">ã€€ margin-right: 0;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  /**æ–¹æ¡ˆäºŒï¼šé€šè¿‡ç»™çˆ¶å®¹å™¨æ·»åŠ marginå±æ€§ï¼Œ å¢åŠ å®¹å™¨çš„å¯ç”¨å®½åº¦æ¥å®ç°**/</span><br><span class="line">ul &#123; ã€€</span><br><span class="line">     margin-right: -20px; </span><br><span class="line">&#125;</span><br><span class="line"> ul &gt; li &#123; ã€€</span><br><span class="line">     float: left; ã€€</span><br><span class="line">     width: 100px; ã€€ </span><br><span class="line">     margin-right: 20px;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="marginï¼šautoçš„å¦™ç”¨"><a href="#marginï¼šautoçš„å¦™ç”¨" class="headerlink" title="marginï¼šautoçš„å¦™ç”¨"></a>marginï¼šautoçš„å¦™ç”¨</h2><h3 id="æ°´å¹³å‚ç›´å±…ä¸­"><a href="#æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="æ°´å¹³å‚ç›´å±…ä¸­"></a>æ°´å¹³å‚ç›´å±…ä¸­</h3><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd5555f087?w=311&amp;h=166&amp;f=png&amp;s=372" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;demo&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .father &#123;</span><br><span class="line">            position: relative;</span><br><span class="line">            width: 300px;</span><br><span class="line">            height: 150px;</span><br><span class="line">            border: red solid 1px;</span><br><span class="line">        &#125;</span><br><span class="line">        .son &#123;</span><br><span class="line">            position: absolute;  /**key code here**/</span><br><span class="line">            background-color: orange;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            top: 0;</span><br><span class="line">            right: 0;</span><br><span class="line">            left: 0;</span><br><span class="line">            bottom: 0;</span><br><span class="line">            margin: auto;  /**key code here**/</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;son&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="å·¦ï¼å³å¯¹é½æ•ˆæœã€‚"><a href="#å·¦ï¼å³å¯¹é½æ•ˆæœã€‚" class="headerlink" title="å·¦ï¼å³å¯¹é½æ•ˆæœã€‚"></a>å·¦ï¼å³å¯¹é½æ•ˆæœã€‚</h3><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd53c92097?w=320&amp;h=221&amp;f=png&amp;s=454" alt="image.png"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">        .father &#123;</span><br><span class="line">            width: 300px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            border: red solid 1px;</span><br><span class="line">        &#125;</span><br><span class="line">        .son &#123;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: orange;</span><br><span class="line">            margin-right: 50px; /**å·¦å¯¹é½margin-rightã€margin-leftå€¼äº¤æ¢**/</span><br><span class="line">            margin-left: auto;  /**key code here**/</span><br><span class="line">        &#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><h3 id="æ°´å¹³å±…ä¸­"><a href="#æ°´å¹³å±…ä¸­" class="headerlink" title="æ°´å¹³å±…ä¸­"></a>æ°´å¹³å±…ä¸­</h3><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd5593f646?w=318&amp;h=210&amp;f=png&amp;s=455" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">        .father &#123;</span><br><span class="line">            width: 300px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            border: red solid 1px;</span><br><span class="line">        &#125;</span><br><span class="line">        .son &#123;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: orange;</span><br><span class="line">            margin-right: auto; /**key code here**/</span><br><span class="line">            margin-left: auto;  /**key code here**/</span><br><span class="line">        &#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>###å‚ç›´å±…ä¸­<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd56bbab63?w=310&amp;h=211&amp;f=png&amp;s=453" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">        .father &#123;</span><br><span class="line">            width: 300px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            writing-mode: vertical-lr;  /**key code here**/</span><br><span class="line">            border: red solid 1px;</span><br><span class="line">        &#125;</span><br><span class="line">        .son &#123;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: orange;</span><br><span class="line">            margin: auto;  /**key code here**/</span><br><span class="line">        &#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="å®ç°æœ€é«˜æ¸²æŸ“æ€§èƒ½çš„å»é™¤ä¸‹è¾¹æ¡†css"><a href="#å®ç°æœ€é«˜æ¸²æŸ“æ€§èƒ½çš„å»é™¤ä¸‹è¾¹æ¡†css" class="headerlink" title="å®ç°æœ€é«˜æ¸²æŸ“æ€§èƒ½çš„å»é™¤ä¸‹è¾¹æ¡†css"></a>å®ç°æœ€é«˜æ¸²æŸ“æ€§èƒ½çš„å»é™¤ä¸‹è¾¹æ¡†css</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">div &#123; ã€€ </span><br><span class="line">    border: 1px solid; ã€€ </span><br><span class="line">    border-bottom: 0 none;  /**key code here**/</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="ä¼˜é›…çš„å¢åŠ iconæŒ‰é’®ç‚¹å‡»åŒºåŸŸ"><a href="#ä¼˜é›…çš„å¢åŠ iconæŒ‰é’®ç‚¹å‡»åŒºåŸŸ" class="headerlink" title="ä¼˜é›…çš„å¢åŠ iconæŒ‰é’®ç‚¹å‡»åŒºåŸŸ"></a>ä¼˜é›…çš„å¢åŠ iconæŒ‰é’®ç‚¹å‡»åŒºåŸŸ</h2><p>ç‚¹å‡» åŒºåŸŸ å¤§å° ä» 16 Ã— 16 ä¸€ä¸‹å­ æå‡ åˆ° 38 Ã— 38ï¼Œ<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd7912d56e?w=668&amp;h=138&amp;f=png&amp;s=43797" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.icon- clear &#123; ã€€</span><br><span class="line">     width: 16px; ã€€ </span><br><span class="line">      height: 16px; ã€€ </span><br><span class="line">      border: 11px solid transparent; ã€€ /**key code here**/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€é«˜æ€§èƒ½ç­‰è¾¹ä¸‰è§’å›¾å½¢ç»˜åˆ¶"><a href="#æœ€é«˜æ€§èƒ½ç­‰è¾¹ä¸‰è§’å›¾å½¢ç»˜åˆ¶" class="headerlink" title="æœ€é«˜æ€§èƒ½ç­‰è¾¹ä¸‰è§’å›¾å½¢ç»˜åˆ¶"></a>æœ€é«˜æ€§èƒ½ç­‰è¾¹ä¸‰è§’å›¾å½¢ç»˜åˆ¶</h2><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd7f1625de?w=112&amp;h=41&amp;f=png&amp;s=168" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">     width: 0;</span><br><span class="line">     border: 10px solid;</span><br><span class="line">     border-color: #f30 transparent transparent;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€é«˜æ€§èƒ½ç­‰è…°ä¸‰è§’å›¾å½¢ç»˜åˆ¶"><a href="#æœ€é«˜æ€§èƒ½ç­‰è…°ä¸‰è§’å›¾å½¢ç»˜åˆ¶" class="headerlink" title="æœ€é«˜æ€§èƒ½ç­‰è…°ä¸‰è§’å›¾å½¢ç»˜åˆ¶"></a>æœ€é«˜æ€§èƒ½ç­‰è…°ä¸‰è§’å›¾å½¢ç»˜åˆ¶</h2><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd85ba6e7e?w=42&amp;h=41&amp;f=png&amp;s=218" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">    width: 0;</span><br><span class="line">    border-width: 20px 10px;</span><br><span class="line">    border-style: solid;</span><br><span class="line">    border-color: #f30 transparent transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆæˆ–è€…æ˜¯è¿™ç§ä¸‰è§’å½¢ï¼ˆå¯¹è¯æ¡†æ°”æ³¡ä¸‹çš„ä¸‰è§’å½¢ï¼‰"><a href="#åˆæˆ–è€…æ˜¯è¿™ç§ä¸‰è§’å½¢ï¼ˆå¯¹è¯æ¡†æ°”æ³¡ä¸‹çš„ä¸‰è§’å½¢ï¼‰" class="headerlink" title="åˆæˆ–è€…æ˜¯è¿™ç§ä¸‰è§’å½¢ï¼ˆå¯¹è¯æ¡†æ°”æ³¡ä¸‹çš„ä¸‰è§’å½¢ï¼‰"></a>åˆæˆ–è€…æ˜¯è¿™ç§ä¸‰è§’å½¢ï¼ˆå¯¹è¯æ¡†æ°”æ³¡ä¸‹çš„ä¸‰è§’å½¢ï¼‰</h2><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd8651cd50?w=56&amp;h=58&amp;f=png&amp;s=251" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">    width: 0;</span><br><span class="line">    border-width: 20px 10px;</span><br><span class="line">    border-style: solid;</span><br><span class="line">    border-color: #f30 #f30 transparent transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€é«˜æ€§èƒ½æ¢¯å½¢å›¾å½¢ç»˜åˆ¶"><a href="#æœ€é«˜æ€§èƒ½æ¢¯å½¢å›¾å½¢ç»˜åˆ¶" class="headerlink" title="æœ€é«˜æ€§èƒ½æ¢¯å½¢å›¾å½¢ç»˜åˆ¶"></a>æœ€é«˜æ€§èƒ½æ¢¯å½¢å›¾å½¢ç»˜åˆ¶</h2><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd8b57e230?w=114&amp;h=31&amp;f=png&amp;s=166" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">    width: 10px;</span><br><span class="line">    height: 10px;</span><br><span class="line">    border: 10px solid;</span><br><span class="line">    border-color: #f30 transparent transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é€¼çœŸ-çš„-3D-æ•ˆæœ"><a href="#é€¼çœŸ-çš„-3D-æ•ˆæœ" class="headerlink" title="é€¼çœŸ çš„ 3D æ•ˆæœ"></a>é€¼çœŸ çš„ 3D æ•ˆæœ</h2><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cd9757be69?w=49&amp;h=51&amp;f=png&amp;s=249" alt="image.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">    width: 10px;</span><br><span class="line">    height: 10px;</span><br><span class="line">    border: 10px solid;</span><br><span class="line">    border-color: #f30 #00f #396 #0f0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¢«é—å¿˜çš„exå•ä½"><a href="#è¢«é—å¿˜çš„exå•ä½" class="headerlink" title="è¢«é—å¿˜çš„exå•ä½"></a>è¢«é—å¿˜çš„<code>ex</code>å•ä½</h2><p>å®ç°ç®­å¤´å±…ä¸­æ–‡å­—å‚ç›´æ–¹å‘ï¼ˆä¸å—å­—ä½“ã€å­—å·å½±å“ï¼‰<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cda4148848?w=203&amp;h=56&amp;f=png&amp;s=200" alt="image.png"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;demo&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line"></span><br><span class="line">        .icon-arrow &#123;</span><br><span class="line">            display: inline-block;</span><br><span class="line">            width: 20px;</span><br><span class="line">            height: 1ex;</span><br><span class="line">            background: url(arrow.svg) no-repeat center/20px 20px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div style=&quot;font-size: 18px&quot;&gt;</span><br><span class="line">       ç®­å¤´å±…ä¸­å¯¹é½</span><br><span class="line">        &lt;i class=&quot;icon-arrow&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><h2 id="æ°¸è¿œå±…ä¸­çš„dialogï¼ˆå¯å…¼å®¹åˆ°IE7ï¼‰"><a href="#æ°¸è¿œå±…ä¸­çš„dialogï¼ˆå¯å…¼å®¹åˆ°IE7ï¼‰" class="headerlink" title="æ°¸è¿œå±…ä¸­çš„dialogï¼ˆå¯å…¼å®¹åˆ°IE7ï¼‰"></a>æ°¸è¿œå±…ä¸­çš„<code>dialog</code>ï¼ˆå¯å…¼å®¹åˆ°IE7ï¼‰</h2><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166586cdab980a2b?w=455&amp;h=374&amp;f=png&amp;s=300" alt="image.png"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;demo&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line"></span><br><span class="line">       .container &#123;</span><br><span class="line">           position: fixed;</span><br><span class="line">           top:0;</span><br><span class="line">           right: 0;</span><br><span class="line">           left: 0;</span><br><span class="line">           bottom: 0;</span><br><span class="line">           background-color: rgba(0,0,0,.5);</span><br><span class="line">           text-align: center;</span><br><span class="line">           font-size: 0;</span><br><span class="line">           white-space: nowrap;</span><br><span class="line">           overflow: auto;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       .container:after &#123;</span><br><span class="line">           content: &apos;&apos;;</span><br><span class="line">           display: inline-block;</span><br><span class="line">           height: 100%;</span><br><span class="line">           vertical-align: middle;</span><br><span class="line">       &#125;</span><br><span class="line">       .content &#123;</span><br><span class="line">           width: 240px;</span><br><span class="line">           height: 120px;</span><br><span class="line">           padding: 20px;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       .dialog &#123;</span><br><span class="line">           display: inline-block;</span><br><span class="line">           vertical-align: middle;</span><br><span class="line">           border-radius: 6px;</span><br><span class="line">           background-color: #fff;</span><br><span class="line">           font-size: 14px;</span><br><span class="line">           white-space: normal;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;dialog&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;content&quot;&gt;è¿™dialogæ°¸è¿œå±…ä¸­&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><h2 id="å»é™¤é¡µé¢é»˜è®¤æ»šåŠ¨æ¡-PCç«¯æœ‰æ•ˆ"><a href="#å»é™¤é¡µé¢é»˜è®¤æ»šåŠ¨æ¡-PCç«¯æœ‰æ•ˆ" class="headerlink" title="å»é™¤é¡µé¢é»˜è®¤æ»šåŠ¨æ¡(PCç«¯æœ‰æ•ˆ)"></a>å»é™¤é¡µé¢é»˜è®¤æ»šåŠ¨æ¡(PCç«¯æœ‰æ•ˆ)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**good code**/</span><br><span class="line"> html &#123;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">/**bad code**/</span><br><span class="line"> html, body &#123;    </span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p><strong><em>æœ¬æ¬¡å†™ä½œåˆ°æ­¤ï¼Œæ¬¢è¿â¤ï¸â­ï¸ğŸ‘æŒ‡å‡ºé”™è¯¯æˆ–è€…å‘å¸ƒè‡ªå·±çš„è§è§£æ¢è®¨ï¼Œå…±å‹‰ã€‚ğŸ¤</em></strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>react native å›½é™…åŒ–(å¤šè¯­è¨€)</title>
      <link href="/blog/2018/10/10/react-native-%E5%9B%BD%E9%99%85%E5%8C%96-%E5%A4%9A%E8%AF%AD%E8%A8%80/"/>
      <url>/blog/2018/10/10/react-native-%E5%9B%BD%E9%99%85%E5%8C%96-%E5%A4%9A%E8%AF%AD%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<p><img src="https://user-gold-cdn.xitu.io/2018/10/9/16658733a57d925c?w=1240&amp;h=2204&amp;f=jpeg&amp;s=89606" alt="5ACF79A333C7F62349D712BC29EC5BA9.jpg"><br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16658733a5891ab1?w=1240&amp;h=2204&amp;f=jpeg&amp;s=103121" alt="C8412602F259771C656EF19DD62A93A0.jpg"><br><a id="more"></a><br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16658733a58d5a14?w=1240&amp;h=2204&amp;f=jpeg&amp;s=159037" alt="B20051984E994AB1EE5588476BE245B7.jpg"><br>åº”ç•™è¨€çš„è¦æ±‚ï¼Œæˆ‘è§‰å¾—éœ€è¦èŠ±ç‚¹æ—¶é—´æ•´ç†ä¸€ä¸‹å…³äºå¤šè¯­è¨€çš„èµ„æ–™äº†ï¼ŒçŒ®ç»™å„ä½å°ä¼™ä¼´å¸Œæœ›èƒ½å¸¦ç»™å¤§å®¶ä¸€äº›æ€è·¯ã€‚ç”±äºä¸€äº›ç‰¹æ®Šçš„åŸå› ä¸Šå›¾é¡¹ç›®ä¸å¥½åšä¸ºå¼€æºé¡¹ç›®æä¾›ç»™å¤§å®¶ï¼Œæ‰€ä»¥æˆ‘è‡ªå·±å†™äº†ä¸€ä¸ªå°demoï¼ˆ<code>æºç è§æ–‡å°¾</code>ï¼‰ï¼ŒåºŸè¯ä¸å¤šè¯´å¼€å§‹æ­£é¢˜ã€‚</p><h2 id="å‡†å¤‡é˜¶æ®µï¼š"><a href="#å‡†å¤‡é˜¶æ®µï¼š" class="headerlink" title="å‡†å¤‡é˜¶æ®µï¼š"></a>å‡†å¤‡é˜¶æ®µï¼š</h2><ul><li><a href="https://github.com/AlexanderZaytsev/react-native-i18n" target="_blank" rel="noopener">react-native-i18n</a> ç¬¬ä¸‰æ–¹å¤šè¯­è¨€åº“<br>å®‰è£…: <code>yarn add react-native-i18n</code> </li><li><a href="[https://github.com/rebeccahughes/react-native-device-info](https://github.com/rebeccahughes/react-native-device-info">react-native-device-info</a><br>)   ç”¨æˆ·è·å–ç³»ç»Ÿæœ¬åœ°è¯­è¨€ç¯å¢ƒ<br>å®‰è£…: <code>yarn add react-native-device-info</code> and <code>react-native link react-native-device-info</code><h2 id="å®è·µé˜¶æ®µï¼š"><a href="#å®è·µé˜¶æ®µï¼š" class="headerlink" title="å®è·µé˜¶æ®µï¼š"></a>å®è·µé˜¶æ®µï¼š</h2>åœ¨é¡¹ç›®ä¸­åˆ›å»º<code>zh.js</code>ã€<code>en.js</code>ã€<code>I18n.js</code>ä¸‰ä¸ªjsæ–‡ä»¶ï¼Œ<code>DataRepository.js</code>æ˜¯ä¸€ä¸ªæˆ‘è‡ªå®šä¹‰çš„æ•°æ®æŒä¹…åŒ–ç±»ï¼Œåœ¨è¿™ä¸ªdemoä¸­çš„ä½œç”¨æ˜¯å­˜å–ç”¨æˆ·æ”¹å˜åçš„è¯­è¨€ç¯å¢ƒï¼Œç›´æ¥æ‹·è´è¿‡å»å°±å¯ä»¥ç”¨(ä¸æ˜¯å¿…é¡»çš„)ã€‚<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16658733a8af8857?w=1240&amp;h=722&amp;f=png&amp;s=233513" alt="image.png"><br>ä»£ç åˆ†åˆ«ä¸ºï¼š<br><code>zh.js</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    english: &apos;è‹±æ–‡&apos;,</span><br><span class="line">    chinese: &apos;ä¸­æ–‡&apos;,</span><br><span class="line">    changeToEnglish: &apos;åˆ‡æ¢åˆ°è‹±æ–‡&apos;,</span><br><span class="line">    changeToChinese: &apos;åˆ‡æ¢åˆ°ä¸­æ–‡&apos;,</span><br><span class="line">    changeToSystem: &apos;åˆ‡æ¢åˆ°ç³»ç»Ÿè¯­è¨€&apos;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><code>en.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    english: &apos;english&apos;,</span><br><span class="line">    chinese: &apos;chinese&apos;,</span><br><span class="line">    changeToEnglish: &apos;change to english&apos;,</span><br><span class="line">    changeToChinese: &apos;change to chinese&apos;,</span><br><span class="line">    changeToSystem: &apos;change to System&apos;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>I18n.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import I18n,&#123; getLanguages &#125; from &apos;react-native-i18n&apos;</span><br><span class="line">import DeviceInfo from &apos;react-native-device-info&apos;</span><br><span class="line">import DataRepository from &apos;../dao/DataRepository&apos;</span><br><span class="line">import en from &apos;./en&apos;</span><br><span class="line">import zh from &apos;./zh&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">I18n.defaultLocale = &apos;en&apos;;</span><br><span class="line"></span><br><span class="line">I18n.fallbacks = true;</span><br><span class="line"></span><br><span class="line">I18n.translations = &#123;</span><br><span class="line">    en,</span><br><span class="line">    zh,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">I18n.localeLanguage = () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">    new DataRepository().fetchLocalRepository(&apos;localLanguage&apos;)</span><br><span class="line">        .then((res)=&gt;&#123;</span><br><span class="line"></span><br><span class="line">            I18n.locale = res;</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((error)=&gt;&#123;</span><br><span class="line"></span><br><span class="line">            I18n.locale = DeviceInfo.getDeviceLocale();</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    return I18n.locale;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export &#123; I18n, getLanguages &#125;;</span><br></pre></td></tr></table></figure></p><h2 id="é‡ç‚¹æ–¹æ³•ã€å±æ€§è®²è§£"><a href="#é‡ç‚¹æ–¹æ³•ã€å±æ€§è®²è§£" class="headerlink" title="é‡ç‚¹æ–¹æ³•ã€å±æ€§è®²è§£"></a>é‡ç‚¹æ–¹æ³•ã€å±æ€§è®²è§£</h2><ul><li><code>I18n.t()</code> : ä½¿ç”¨é¢‘ç‡æ˜¯æœ€é«˜çš„ï¼Œä¸¾ä¸ªæ —å­ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Text style=&#123;styles.welcome&#125;&gt;</span><br><span class="line">            &#123;I18n.t(&apos;english&apos;)&#125;</span><br><span class="line">        &lt;/Text&gt;</span><br></pre></td></tr></table></figure></li></ul><p>ä»¥ä¸Š<code>I18n.t(&#39;english&#39;)</code>ä¸­çš„<code>english</code>å‚æ•°å°±æ˜¯åœ¨<code>zh.js</code>ã€<code>en.js</code>æ–‡ä»¶ä¸­çš„è¯­è¨€é…ç½®é¡¹<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16658733a8bb9e9b?w=1020&amp;h=418&amp;f=png&amp;s=54016" alt="image.png"><br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16658733a8cb2f2e?w=1218&amp;h=408&amp;f=png&amp;s=49930" alt="image.png"><br>å…·ä½“æ˜¾ç¤ºå†…å®¹ä¼šéšç€è¯­è¨€ç¯å¢ƒè°ƒç”¨ç›¸åº”çš„è¯­è¨€é…ç½®æ–‡ä»¶ï¼Œå‘ˆç°ç»™ç”¨æˆ·ç›¸åº”çš„è¯­è¨€å†…å®¹ã€‚</p><ul><li><code>I18n.getLanguages</code> è·å–ç”¨æˆ·é¦–é€‰çš„è¯­è¨€ç¯å¢ƒ</li><li><code>I18n.locale</code> : è®¾ç½®æœ¬åœ°è¯­è¨€ç¯å¢ƒã€‚</li><li><code>I18n.defaultLocale</code> é¦–é€‰é»˜è®¤è¯­è¨€</li><li><code>I18n.fallbacks</code> : çœ‹æ–‡æ¡£è¯´æ˜æˆ‘ç†è§£çš„æ„æ€æ˜¯ï¼šå¦‚æœè·å–åˆ°çš„ç³»ç»Ÿè¯­è¨€ç±»ä¼¼<code>en_US</code> <code>en-GB</code>è¿™æ ·çš„ï¼Œæ’ä»¶åˆå§‹åŒ–çš„æ—¶å€™å‘ç°æ²¡æœ‰<code>en_US.js</code> <code>en-GB.js</code>ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœè®¾ç½®äº†<code>I18n.fallbacks = true;</code>ç³»ç»Ÿå°±ä¼šæŒ‰è¿™æ ·çš„ï¼ˆ<code>en_US</code> <code>en.js</code>ï¼‰é¡ºåºå»æŸ¥æ‰¾æ–‡ä»¶ï¼Œå°±ä¼šå»æ‰¾æœ‰ä¸€ä¸ª<code>en.js</code>è¿™æ ·çš„æ–‡ä»¶ï¼Œ å®˜æ–¹å»ºè®®ä½¿ç”¨<code>I18n.fallbacks = true;</code><h4 id="æ›´å¤šå…³äºi18n-js-çš„å±æ€§å’Œæ–¹æ³•è¯·-ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹"><a href="#æ›´å¤šå…³äºi18n-js-çš„å±æ€§å’Œæ–¹æ³•è¯·-ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹" class="headerlink" title="æ›´å¤šå…³äºi18n-js çš„å±æ€§å’Œæ–¹æ³•è¯· ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹"></a>æ›´å¤šå…³äº<code>i18n-js</code> çš„å±æ€§å’Œæ–¹æ³•è¯· <a href="https://github.com/fnando/i18n-js#setting-up" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹</a></h4></li></ul><h1 id="ioséœ€è¦é…ç½®è¯­è¨€ç¯å¢ƒï¼š"><a href="#ioséœ€è¦é…ç½®è¯­è¨€ç¯å¢ƒï¼š" class="headerlink" title="ioséœ€è¦é…ç½®è¯­è¨€ç¯å¢ƒï¼š"></a>ioséœ€è¦é…ç½®è¯­è¨€ç¯å¢ƒï¼š</h1><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/1665873495a494ac?w=1240&amp;h=798&amp;f=png&amp;s=247123" alt="image.png"></p><h1 id="ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ä¸€ä¸ªåˆ·æ–°çš„é—®é¢˜ï¼š"><a href="#ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ä¸€ä¸ªåˆ·æ–°çš„é—®é¢˜ï¼š" class="headerlink" title="ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ä¸€ä¸ªåˆ·æ–°çš„é—®é¢˜ï¼š"></a>ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ä¸€ä¸ªåˆ·æ–°çš„é—®é¢˜ï¼š</h1><p>æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°è°ƒç”¨äº†<code>I18n.locale=â€˜æˆ‘è®¾ç½®çš„è¯­è¨€â€™</code>åï¼Œå½“å‰çš„ç•Œé¢è¯­è¨€å¹¶æ²¡æœ‰æ”¹å˜ï¼Œè€Œå…¶ä»–ç•Œé¢çš„è¯­è¨€å·²ç»æ”¹å˜äº†ï¼Œå°±æ¯”å¦‚è¯´æˆ‘ä¸Šé¢æˆªå›¾çš„ä¾§æ»‘èœå•ï¼Œå½“æˆ‘åœ¨ä¾§æ»‘èœå•åˆ‡æ¢è¯­è¨€åå‘ç°ä¾§æ»‘èœå•é‡Œé¢çš„è¯­è¨€å¹¶æ²¡æœ‰å‘ç°å˜åŒ–ï¼Œè€Œé¦–é¡µçš„è¯­è¨€ç¯å¢ƒå·²ç»æ”¹å˜äº†ï¼Œæˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ‘¸ç´¢æœ€åæ‰¾åˆ°äº†ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ˆå¯èƒ½ä¸æ˜¯æœ€ä½³æ–¹æ¡ˆï¼Œä½†æ˜¯è§£å†³äº†åˆ·æ–°å½“å‰ç•Œé¢è¯­è¨€çš„é—®é¢˜ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ³•æ¬¢è¿ğŸ‘åˆ†äº«ï¼‰ï¼Œè§£å†³æ–¹æ¡ˆï¼šè°ƒç”¨ä¸€ä¸‹<code>setState</code>ï¼ˆæ— è®ºè®¾ç½®çš„è¿™ä¸ª<code>state</code>å±æ€§åœ¨<code>render</code>ä¸­æœ‰æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œéƒ½æœ‰æ•ˆï¼‰ã€‚ å…·ä½“ä»£ç çœ‹<code>App.js</code>ï¼Œæˆ‘é¡¹ç›®ä¸­æœ‰ä½¿ç”¨<code>localeLanguage</code>æ‰€ä»¥æˆ‘æŠŠæ”¹å˜åçš„è¯­è¨€å­˜åˆ°<code>state</code>ä¸­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.setState(&#123;</span><br><span class="line">           localeLanguage: I18n.locale</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/166587349563d0da?w=1240&amp;h=1057&amp;f=png&amp;s=629335" alt="image.png"><br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16658734958b8b66?w=1240&amp;h=1095&amp;f=png&amp;s=177870" alt="image.png"></p><p><strong><em><a href="https://github.com/giantss/RNInternationalizedDemo" target="_blank" rel="noopener">demo</a> åœ¨æ­¤ ï¼Œæœ¬æ¬¡å†™ä½œåˆ°æ­¤ï¼Œæ¬¢è¿â¤ï¸â­ï¸ğŸ‘æŒ‡å‡ºé”™è¯¯æˆ–è€…å‘å¸ƒè‡ªå·±çš„è§è§£æ¢è®¨ï¼Œå…±å‹‰ã€‚ğŸ¤</em></strong></p><p>hello <a href="https://giantss.github.io/blog/2018/10/10/react-native-å›½é™…åŒ–-å¤šè¯­è¨€/">https://giantss.github.io/blog/2018/10/10/react-native-å›½é™…åŒ–-å¤šè¯­è¨€/</a> bye</p>]]></content>
      
      
      
        <tags>
            
            <tag> react native </tag>
            
            <tag> å›½é™…åŒ– </tag>
            
            <tag> å¤šè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Redux for react native æŒ‡å—(æŒç»­æ›´æ–°)</title>
      <link href="/blog/2018/09/27/Redux-for-react-native-%E6%8C%87%E5%8D%97-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/"/>
      <url>/blog/2018/09/27/Redux-for-react-native-%E6%8C%87%E5%8D%97-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¦‚æœè¦çœ‹ç†è®ºçš„ç«¥é‹ç‚¹å‡»è¿™é‡Œ <a href="https://cn.redux.js.org/" target="_blank" rel="noopener">reduxä¸­æ–‡æ–‡æ¡£</a> æˆ–è€… <a href="https://redux.js.org/" target="_blank" rel="noopener">reduxå®˜æ–¹æ–‡æ¡£</a> ï¼Œæœ¬æ–‡ä¸ä¼šå¤ªåˆ»æ„å»ä»‹ç»å¤§ç¯‡å¹…çš„ç†è®ºï¼Œæœ¬æ–‡ä¸åšæ¡†æ¶ä¹‹é—´çš„å¯¹æ¯”ï¼Œåªç»™æƒ³å­¦<code>redux</code>çš„ç«¥é‹æä¾›å®è´¨çš„ã€é«˜æ•ˆçš„ã€æ˜“ç†è§£çš„å­¦ä¹ å‚è€ƒèµ„æºï¼Œåˆ†äº«è‡ªå·±åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­çš„å¾—åˆ°ã€‚æ–‡ç« æ›´æ–°å®Œåä¼šæ¯”è¾ƒé•¿ï¼Œè¯·è€å¿ƒé˜…è¯»ç†è§£ã€‚ï¼ˆæ–‡åæœ‰å½©è›‹ ï¼‰ã€‚</p><h3 id="å·²æ›´æ–°å†…å®¹"><a href="#å·²æ›´æ–°å†…å®¹" class="headerlink" title="å·²æ›´æ–°å†…å®¹"></a>å·²æ›´æ–°å†…å®¹</h3><ul><li><code>redux</code> åŸºæœ¬ä½¿ç”¨ (é™„demo) ã€‚</li><li><code>redux</code> <code>Middleware</code>ä½¿ç”¨ï¼ˆé™„demoï¼‰</li></ul><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8c086fce0e?w=270&amp;h=480&amp;f=gif&amp;s=226268" alt="redux åŸºæœ¬ä½¿ç”¨"><br>æ¨¡ä»¿å®˜æ–¹ <a href="https://codesandbox.io/s/github/reactjs/redux/tree/master/examples/todos" target="_blank" rel="noopener">Todos</a>  demo çš„<code>react native</code>ç‰ˆã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8c07b9fdf5?w=270&amp;h=480&amp;f=gif&amp;s=193296" alt="redux Middlewareä½¿ç”¨"><br>æ¨¡ä»¿å®˜æ–¹ <a href="https://codesandbox.io/s/github/reactjs/redux/tree/master/examples/async" target="_blank" rel="noopener">async</a>  demo çš„<code>react native</code>ç‰ˆã€‚</p><a id="more"></a><h1 id="ä¸ºä»€ä¹ˆæˆ‘è¦å†™è¿™ä¸ªdemo"><a href="#ä¸ºä»€ä¹ˆæˆ‘è¦å†™è¿™ä¸ªdemo" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘è¦å†™è¿™ä¸ªdemo"></a>ä¸ºä»€ä¹ˆæˆ‘è¦å†™è¿™ä¸ªdemo</h1><p>æœ‰çš„ç«¥é‹å¯èƒ½ä¼šæœ‰ç–‘é—®</p><p>é—®ï¼šå®˜æ–¹ä¸æ˜¯<code>Todos</code>demoå—ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦å†™è¿™ä¸ªdemoï¼Ÿ</p><p>ç­”ï¼šå®˜æ–¹çš„demoéƒ½æ˜¯<code>react</code>çš„ï¼Œè€Œå¹¶é<code>react native</code>çš„ã€‚æˆ‘ä¹Ÿæ‰¾è¿‡å¾ˆå¤šå…³äºä»‹ç»reduxçš„æ–‡ç« ï¼Œä½†æˆ‘å‘ç°æ‰¾åˆ°çš„èµ„æ–™è¦ä¹ˆå¤ªåŸºç¡€ã€è¦ä¹ˆä»‹ç»ä¸å…¨é¢ã€æä¾›çš„demoä¸‹è½½æ— æ³•ä½¿ç”¨ç­‰ç­‰å„ç§é—®é¢˜ï¼Œè¿«ä½¿æˆ‘æœ‰äº†è‡ªå·±åŠ¨æ‰‹é€ è½®çš„å†²åŠ¨ï¼Œè€Œä¸”è¿™ä¸ªdemoå¹¶éåªæ˜¯ä»‹ç»å…³äºreduxçš„åŸºç¡€çš„ä¸œè¥¿ï¼Œæœ‰ç©ºæˆ‘è¿˜æ²¡é™†ç»­æ›´æ–°åœ¨ä½¿ç”¨<code>redux</code>è¿‡ç¨‹ä¸­çš„å¾—åˆ°ï¼Œå¸Œæœ›å¤§å®¶é¼“åŠ±æ”¯æŒã€‚</p><h1 id="demoé‡‡ç”¨çš„ä»£ç è§„èŒƒ"><a href="#demoé‡‡ç”¨çš„ä»£ç è§„èŒƒ" class="headerlink" title="demoé‡‡ç”¨çš„ä»£ç è§„èŒƒ"></a>demoé‡‡ç”¨çš„ä»£ç è§„èŒƒ</h1><p>é€šå¸¸ä¸€ä¸ªå¤§é¡¹ç›®åˆ°åæœŸæ˜¯éœ€è¦å¾ˆå¤šå¼€å‘è€…å‚ä¸çš„ï¼Œå¦‚æœæ¯ä¸ªå¼€å‘è€…éƒ½ä½¿ç”¨è‡ªå·±çš„ä¸€å¥—ä»£ç è§„èŒƒåšäº‹æƒ…ï¼Œè¿™æ ·å¸¦æ¥çš„åæœå°±æ˜¯ï¼šåæœŸçš„ä»£ç ç®¡ç†å·¥ä½œå¸¦æ¥éå¸¸å¤§çš„éº»çƒ¦ï¼Œæµªè´¹æ›´å¤šçš„æ—¶é—´å»é‡æ„ï¼Œè€Œä¸”ä¹Ÿä¼šè®©æ–°äººçœ‹ä»£ç æ—¶ç†è§£èŠ±æ›´å¤šçš„æ—¶é—´ï¼Œè¿˜å®¹æ˜“æŠŠåˆ«äººå¸¦æ²Ÿé‡Œå»ï¼Œæ‰€ä»¥ä¸€ä¸ªå¤§å‹é¡¹ç›®æœ€åˆæ„å»ºæ¶æ„çš„æ—¶å€™å°±å¿…é¡»è¦éµå®ˆä¸€äº›è§„èŒƒã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆèƒ½æ•²å‡ºæ¸…çˆ½è€Œåˆä¼˜é›…çš„ä»£ç å‘¢ï¼Ÿåˆå¦‚ä½•æ£€æŸ¥æˆ‘ä»¬ä»£ç è´¨é‡åˆæ ¼å‘¢ï¼Ÿ<br>æˆ‘åœ¨è¿™é‡ŒæåŠ›æ¨èéµå®ˆ<a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener">airbnb/javascript</a>çš„è§„èŒƒå’Œä½¿ç”¨<a href="https://github.com/eslint/eslint" target="_blank" rel="noopener">eslint</a>æ¥æ£€æŸ¥è‡ªå·±ä»£ç çš„ä»£ç è´¨é‡ï¼ˆæ˜¯å¦éµå®ˆäº†è§„èŒƒï¼‰ï¼Œå› ä¸ºå®ƒä»¬å·²ç»å¾—åˆ°äº†å¾ˆå¤šå…¬å¸å’Œå¼€å‘è€…çš„è®¤å¯ã€‚ï¼ˆè¿™é‡Œè¿‡å¤šçš„ä»‹ç»<code>airbnb</code> <code>eslint</code>ï¼Œæœ¬æ–‡åªæä¾›æ€è·¯ï¼Œæƒ³äº†è§£æ›´å¤šè‡ªè¡Œæœç´¢ï¼‰</p><p>åœ¨æ²¡æœ‰ä½¿ç”¨ä»£ç è§„èŒƒå‰æˆ‘ä»¬å¯èƒ½ç”¨å„è‡ªçš„é£æ ¼å†™äº†å¾ˆå¤šå¹´çš„ä»£ç äº†ï¼Œçªç„¶è¦é€‚åº”è¿™å¥—è§„èŒƒå¯èƒ½éå¸¸ä¸é€‚åº”ï¼Œæ²¡å…³ç³»ï¼Œå¤šæ•²å¤šç»ƒä¹ ï¼Œæ—¶é—´é•¿äº†å°±ä¹ æƒ¯äº†ï¼Œè°è¿˜æ²¡æœ‰ä¸€ä¸ªè¿‡ç¨‹ï¼Œè¿‡ç¨‹æ˜¯ç—›è‹¦çš„ï¼Œä½†ç—›è‹¦è¿‡åä¼šç»™ä½ å¸¦æ¥è´¨çš„å‡åï¼Œè‡ªå·±æ…¢æ…¢é¢†æ‚Ÿä½“ä¼šå§ã€‚å¥½çš„äº‹ç‰©ä¸œè¥¿æ˜¯ä¼šè¢«ä¸–ç•Œæ‰€æ¥å—ï¼Œå·®çš„äº‹ç‰©æœ€ç»ˆæ˜¯è¦è¢«æ›¿ä»£çš„ï¼Œæ‰€ä»¥åšä¸ºä¸€ä¸ªåˆæ ¼çš„ç¨‹åºå‘˜ï¼ˆç‰¹åˆ«æ˜¯å‰ç«¯ç¨‹åºå‘˜ï¼‰è¦æ‹¥æŠ±å˜åŒ–ï¼Œå› ä¸ºå®ƒä¼šä½¿ä½ å˜å¾—æ›´åŠ çš„ä¼˜ç§€ï¼Œå¾—åˆ°å¤§ä¼—çš„è®¤å¯ã€‚é™¤éä½ ä¸æ„¿æ„è®©è‡ªå·±å˜å¾—æ›´ä¼˜ç§€ã€‚</p><h1 id="reduxèƒ½å¸®æˆ‘ä»¬åšä»€ä¹ˆ"><a href="#reduxèƒ½å¸®æˆ‘ä»¬åšä»€ä¹ˆ" class="headerlink" title="reduxèƒ½å¸®æˆ‘ä»¬åšä»€ä¹ˆ"></a>reduxèƒ½å¸®æˆ‘ä»¬åšä»€ä¹ˆ</h1><p>ä¸¤å¼ å›¾ç¤ºæ„ï¼š<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8c0994fcbd?w=600&amp;h=399&amp;f=png&amp;s=428741" alt="æœªä½¿ç”¨reduxçš„å¤§å‹react nativeé¡¹ç›®"><br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8c0a05d64c?w=481&amp;h=586&amp;f=png&amp;s=400514" alt="ä½¿ç”¨reduxåçš„å¤§å‹react nativeé¡¹ç›®"></p><h1 id="reduxç‰¹æ€§"><a href="#reduxç‰¹æ€§" class="headerlink" title="reduxç‰¹æ€§"></a>reduxç‰¹æ€§</h1><ul><li><p><strong>å•ä¸€æ•°æ®æºï¼š æ•´ä¸ªåº”ç”¨çš„ <a href="https://cn.redux.js.org/docs/Glossary.html#state" target="_blank" rel="noopener">state</a> è¢«å‚¨å­˜åœ¨ä¸€æ£µ object tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª <a href="https://cn.redux.js.org/docs/Glossary.html#store" target="_blank" rel="noopener">store</a> ä¸­ã€‚</strong></p></li><li><p><strong>State æ˜¯åªè¯»çš„ï¼šå”¯ä¸€æ”¹å˜ state çš„æ–¹æ³•å°±æ˜¯è§¦å‘ <a href="https://cn.redux.js.org/docs/Glossary.html#action" target="_blank" rel="noopener">action</a>ï¼Œaction æ˜¯ä¸€ä¸ªç”¨äºæè¿°å·²å‘ç”Ÿäº‹ä»¶çš„æ™®é€šå¯¹è±¡ã€‚</strong></p></li><li><p><strong>ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹ï¼šä¸ºäº†æè¿° action å¦‚ä½•æ”¹å˜ state tree ï¼Œä½ éœ€è¦ç¼–å†™ <a href="https://cn.redux.js.org/docs/Glossary.html#reducer" target="_blank" rel="noopener">reducers</a>ã€‚</strong></p></li><li><p><strong>é¢„è§æ€§ï¼šæ‰€æœ‰çš„ç”¨æˆ·çš„è¡Œä¸ºéƒ½æ˜¯ä½ æå‰å®šä¹‰å¥½çš„ã€‚</strong></p></li><li><strong>ç»Ÿä¸€ç®¡ç†stateï¼šæ‰€æœ‰çš„çŠ¶æ€éƒ½åœ¨ä¸€ä¸ªstoreä¸­åˆ†é…ç®¡ç†ã€‚</strong></li></ul><h1 id="å“ªäº›å¼€å‘è€…å’Œé¡¹ç›®é€‚åˆç”¨redux"><a href="#å“ªäº›å¼€å‘è€…å’Œé¡¹ç›®é€‚åˆç”¨redux" class="headerlink" title="å“ªäº›å¼€å‘è€…å’Œé¡¹ç›®é€‚åˆç”¨redux"></a>å“ªäº›å¼€å‘è€…å’Œé¡¹ç›®é€‚åˆç”¨redux</h1><p>è¿™é‡Œåªé’ˆå¯¹<code>react native</code>å¼€å‘è€Œè¨€ï¼š</p><ul><li>åˆçº§ï¼šåˆšæ¥è§¦<code>react native</code>æˆ‘éå¸¸ä¸å»ºè®®å»ä½¿ç”¨ï¼Œå› ä¸ºä½ è¿˜ä¸çŸ¥é“æ€ä¹ˆç”¨å®ƒï¼Œå»ºè®®å…ˆè¾¾åˆ°ä¸­çº§ã€‚</li><li>ä¸­çº§ï¼šä½¿ç”¨<code>react native</code>åšå‡ºä¸€ä¸ªä»¥ä¸Šå·²ç»ä¸Šæ¶çš„<code>ä¸å¤æ‚</code>çš„åº”ç”¨ <code>redux</code>ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ï¼Œå› ä¸ºä½¿ç”¨å®ƒå¹¶ä¸èƒ½è®©ä½ åœ¨å‰æœŸå¿«é€Ÿçš„è¿­ä»£å¼€å‘ï¼Œåœ¨è¿™æ ·çš„é¡¹ç›®ä¸‹ä½¿ç”¨<code>redux</code>å°±å¥½æ¯”<code>å¤§ç‚®æ‰“èšŠå­</code>ï¼Œå‰¯ä½œç”¨å¾ˆå¤§ã€‚ä½†æ˜¯å¯ä»¥å…ˆäº†è§£èµ·æ¥ï¼Œå¹¶å‘ç°å®ƒçš„ä¼˜ç‚¹ã€‚è¿™ç±»ç›¸å¯¹ç®€å•çš„åº”ç”¨ï¼šå½“ç”¨æˆ·è§¦å‘ä¸€ä¸ªåŠ¨ä½œï¼ˆç¨‹åºéœ€è¦<code>setState({xxx:xxx})</code>)çš„æ—¶å€™åº”ç”¨ç¨‹åºçŠ¶æ€æµç¨‹æ˜¯è¿™æ ·çš„ï¼š<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8c0a03ecd7?w=550&amp;h=325&amp;f=gif&amp;s=384959" alt="ç®€å•çš„çŠ¶æ€æµç¨‹"></li></ul><ul><li>é«˜çº§ï¼šä½¿ç”¨<code>react native</code>åšå‡ºä¸€ä¸ªä»¥ä¸Šå·²ç»ä¸Šæ¶çš„<code>å¤æ‚</code>çš„åº”ç”¨(æ¶‰åŠåˆ°å³æ—¶é€šè®¯ã€ç•Œé¢å¸ƒå±€æ¯”è¾ƒå¤æ‚ï¼Œç»„ä»¶åµŒå¥—å¤ªå¤šå±‚æ¬¡ç­‰)ï¼Œè€Œè¿™ç±»å¤æ‚åº”ç”¨ï¼šå½“ç”¨æˆ·è§¦å‘ä¸€ä¸ªåŠ¨ä½œï¼ˆç¨‹åºéœ€è¦<code>setState({xxx:xxx})</code>)çš„æ—¶å€™åº”ç”¨ç¨‹åºçŠ¶æ€æµç¨‹æ˜¯è¿™æ ·çš„ï¼š<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8c09ce75bb?w=550&amp;h=475&amp;f=gif&amp;s=2170979" alt="å¤æ‚çš„çŠ¶æ€æµç¨‹"></li></ul><p>è¿™ç§çŠ¶æ€å¸¦æ¥çš„åæœï¼Œä¸¤æ–¹é¢åˆ†æï¼š</p><ul><li>æ€§èƒ½ï¼šç¥–çˆ¶å­ç»„ä»¶ä¹‹é—´å¤šä½™çš„çŠ¶æ€ä¼ é€’ï¼Œå¯¼è‡´å®è´µçš„å†…å­˜èµ„æºæµªè´¹ï¼ŒåŒæ—¶ç•Œé¢æ¸²æŸ“çš„é€Ÿåº¦ä¹Ÿä¼šå˜æ…¢ï¼Œè‡ªç„¶ç”¨æˆ·ä½“éªŒå°±å˜å·®äº†ã€‚</li><li>çŠ¶æ€ç®¡ç†ï¼šå½“ç¨‹åºä¸æ–­çš„è¿­ä»£ï¼Œç•Œé¢å¸ƒå±€è¶Šæ¥è¶Šå¤æ‚ï¼Œå¿…ç„¶å°±ä¼šäº§ç”Ÿè®¸å¤šçš„<code>state</code>çŠ¶æ€ï¼Œé‚£ä½ æ˜¯å¦‚ä½•æœ‰æ•ˆçš„ç®¡ç†è¿™äº›çŠ¶æ€ï¼Ÿæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´UIå¤šæ¬¡æ¸²æŸ“ï¼Ÿæ˜¯å“ªä¸€æ­¥æ“ä½œå¯¼è‡´çš„UIç»„ä»¶çš„å˜åŒ–ï¼Ÿåœ¨æ²¡æœ‰ä½¿ç”¨<code>redux</code>å‰ä½ å¯èƒ½å·²ç»å‘ç°å¯ä»¥ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„<code>shouldComponentUpdate</code>æ¥å‡å°‘å­ç»„ä»¶ä¸­æ²¡å¿…è¦çš„æ¸²æŸ“ï¼Œä½†ç»ˆç©¶è§£å†³ä¸äº†çŠ¶æ€ç®¡ç†å¤æ‚çš„éš¾é¢˜ã€‚<br>å½“ä½ ä½¿ç”¨<code>redux</code>åï¼Œå¤æ‚çš„åº”ç”¨ç¨‹åºçŠ¶æ€æµç¨‹æ˜¯è¿™æ ·çš„ï¼š<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8c337f41c0?w=700&amp;h=475&amp;f=gif&amp;s=2555904" alt="ä½¿ç”¨reduxå"><br>çœ‹å®Œä¸Šé¢å›¾æ–‡åï¼Œæ˜¯å¦å¾ˆç›´è§‚çš„ç†è§£äº†æ€æ ·çš„é¡¹ç›®æ‰é€‚åˆç”¨reduxå‘¢ï¼Œè¿™è¦æ„Ÿè°¢<a href="https://segmentfault.com/u/justjavac" target="_blank" rel="noopener"><strong>@justjavac</strong></a>æ–‡ç« æä¾›çš„åŠ¨å›¾æ”¯æŒã€‚</li></ul><h1 id="redux-for-react-native-å·¥ä½œé€»è¾‘å›¾"><a href="#redux-for-react-native-å·¥ä½œé€»è¾‘å›¾" class="headerlink" title="redux for react native å·¥ä½œé€»è¾‘å›¾"></a>redux for react native å·¥ä½œé€»è¾‘å›¾</h1><p>æ„Ÿè°¢@<a href="https://www.jianshu.com/u/8b645668c3c4" target="_blank" rel="noopener">é»‘æ£®æ—å·¥ä½œå®¤</a>ä½œè€…æä¾›çš„æ¸…æ™°çš„é€»è¾‘å›¾<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8cb4bc02d4?w=800&amp;h=504&amp;f=png&amp;s=57343" alt="æ¸…æ™°é€»è¾‘å›¾"></p><h1 id="reduxå·¥ç¨‹ç»“æ„åˆ†æ"><a href="#reduxå·¥ç¨‹ç»“æ„åˆ†æ" class="headerlink" title="reduxå·¥ç¨‹ç»“æ„åˆ†æ"></a>reduxå·¥ç¨‹ç»“æ„åˆ†æ</h1><p>æˆ‘å¯¹å®˜æ–¹çš„demoå°éƒ¨åˆ†ä½ç½®åšäº†äº›æ”¹é€ å…·ä½“çœ‹ä»£ç åˆ†æï¼š<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8cb94f23bb?w=600&amp;h=662&amp;f=png&amp;s=99628" alt="image.png"></p><h1 id="åˆ†å·¥æ˜ç»†"><a href="#åˆ†å·¥æ˜ç»†" class="headerlink" title="åˆ†å·¥æ˜ç»†"></a>åˆ†å·¥æ˜ç»†</h1><ul><li><code>js/actions</code><br>æ­¤æ–‡ä»¶å¤¹ä¸‹æ”¾å†…å®¹åšçš„äº‹æƒ…æ˜¯ï¼šå®šä¹‰ç”¨æˆ·è¡Œä¸ºã€‚</li><li><code>js/reducers</code><br>æ­¤æ–‡ä»¶å¤¹ä¸‹æ”¾å†…å®¹åšçš„äº‹æƒ…æ˜¯ï¼šå“åº”ç”¨æˆ·è¡Œä¸ºï¼Œè¿”å›æ”¹å˜åçš„çŠ¶æ€ï¼Œå¹¶å‘é€åˆ° <code>store</code>ã€‚</li><li><code>js/components</code><br>æ­¤æ–‡ä»¶å¤¹ä¸‹æ”¾å†…å®¹åšçš„äº‹æƒ…æ˜¯ï¼šè‡ªå®šä¹‰çš„ç»„ä»¶ã€‚</li><li><code>js/containers</code><br>æ­¤æ–‡ä»¶å¤¹ä¸‹æ”¾å†…å®¹åšçš„äº‹æƒ…æ˜¯ï¼šæŠŠ<code>components</code>æ–‡ä»¶å¤¹ä¸­æ¶‰åŠåˆ°çŠ¶æ€å˜åŒ–çš„ç»„ä»¶è¿›è¡Œç¬¬äºŒæ¬¡å°è£…ã€‚</li><li><code>App.js</code><br>å…¥å£æ–‡ä»¶ï¼ˆstoreåœ¨è¿™é‡Œï¼‰ï¼Œä¸ºä»€ä¹ˆæˆ‘è¦æŠŠstoreå®šä¹‰åœ¨è¿™é‡Œï¼Ÿ å› ä¸ºå®ƒæ˜¯å”¯ä¸€çš„ï¼Œè€Œä¸”å¿…é¡»ä½¿ç”¨<code>react-redux</code>æä¾›çš„<code>Provider</code>ç»„ä»¶åŒ…è£¹å…¥å£çš„å…¶ä»–ç»„ä»¶æ‰èƒ½ä½¿<code>redux</code>ä¸­çš„<code>store</code>ç”Ÿæ•ˆã€‚</li><li><code>global.js</code><br>å­˜æ”¾å…¨å±€å®šä¹‰çš„å˜é‡ã€å¸¸é‡ã€æ–¹æ³•ç­‰ã€‚</li></ul><h1 id="éœ€è¦æ³¨æ„çš„äº‹"><a href="#éœ€è¦æ³¨æ„çš„äº‹" class="headerlink" title="éœ€è¦æ³¨æ„çš„äº‹"></a>éœ€è¦æ³¨æ„çš„äº‹</h1><ul><li>ä¸€ä¸ªå·¥ç¨‹ä¸­ <code>redux</code> çš„ <code>store</code> æ˜¯å”¯ä¸€çš„ï¼Œä¸èƒ½åœ¨å¤šä¸ª <code>store</code>  ã€‚</li><li>ä¿æŒ <code>reducer</code> çº¯å‡€éå¸¸é‡è¦ã€‚æ°¸è¿œä¸è¦åœ¨ <code>reducer</code> é‡Œåšè¿™äº›æ“ä½œï¼š<blockquote><ul><li>ä¿®æ”¹ä¼ å…¥å‚æ•°ï¼›</li><li>æ‰§è¡Œæœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œå¦‚ <code>API</code> è¯·æ±‚å’Œè·¯ç”±è·³è½¬ï¼›</li><li>è°ƒç”¨éçº¯å‡½æ•°ï¼Œå¦‚ <code>Date.now()</code> æˆ– <code>Math.random()</code>;</li></ul></blockquote></li><li>ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦<code>...</code>ä»£æ›¿<code>Object.assign()</code>æ‰æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</li><li>ç»„ä»¶åé¦–å­—æ¯è¦å¤§å†™ï¼Œä¹Ÿå°±æ˜¯è¯´<code>components</code>å’Œ<code>containers</code>æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶é¦–å­—æ¯éƒ½è¦å¤§å†™ã€‚</li><li>åº”è¯¥å°½é‡å‡å°‘ä¼ é€’åˆ°<code>action</code> ä¸­çš„æ•°æ®ï¼ˆèƒ½ä¼ å•ä¸ªæ•°æ®å°±ä¸ä¼ å¯¹è±¡ï¼Œèƒ½ä¼ å¯¹è±¡å°±ä¸ä¼ æ•°ç»„ï¼‰<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//good</span><br><span class="line">function todoApp(state = initialState, action) &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case SET_VISIBILITY_FILTER:</span><br><span class="line">      return Object.assign(&#123;&#125;, state, &#123;</span><br><span class="line">        visibilityFilter: action.filter</span><br><span class="line">      &#125;)</span><br><span class="line">    default:</span><br><span class="line">      return state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//best</span><br><span class="line">function todoApp(state = initialState, action) &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case SET_VISIBILITY_FILTER:</span><br><span class="line">      return &#123; ...state, visibilityFilter: action.filter &#125;</span><br><span class="line">    default:</span><br><span class="line">      return state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä»£ç è¯¦è§£"><a href="#ä»£ç è¯¦è§£" class="headerlink" title="ä»£ç è¯¦è§£"></a>ä»£ç è¯¦è§£</h1><p><code>js/actions/types.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//æ·»åŠ åˆ—è¡¨æ•°æ®</span><br><span class="line">export const ADD_TODO = &apos;ADD_TODO&apos;;</span><br><span class="line">//ç­›é€‰</span><br><span class="line">export const SET_VISIBILITY_FILTER = &apos;SET_VISIBILITY_FILTER&apos;;</span><br><span class="line">//æ–‡å­—æ·»åŠ ï¼å–æ¶ˆä¸­åˆ’çº¿</span><br><span class="line">export const TOGGLE_TODO = &apos;TOGGLE_TODO&apos;;</span><br></pre></td></tr></table></figure></p><p><strong><em>é‡Šï¼š</em></strong> </p><p><strong><em>actionå®šä¹‰</em></strong></p><p>ä¸ºä»€ä¹ˆæˆ‘è¦æŠŠç”¨æˆ·çš„<code>action</code>(è¡Œä¸º)å®šä¹‰å•ç‹¬æŠ½å‡ºæ¥å†™ä¸€ä¸ª<code>type.js</code>ï¼Ÿ</p><ul><li>æ–¹ä¾¿çŠ¶æ€ç®¡ç†ã€‚</li><li>å¤ç”¨æ€§ã€‚</li></ul><hr><p><code>js/actions/index.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import  &#123;</span><br><span class="line">    ADD_TODO,</span><br><span class="line">    SET_VISIBILITY_FILTER,</span><br><span class="line">    TOGGLE_TODO,</span><br><span class="line">&#125; from &apos;./types&apos;</span><br><span class="line">let nextTodoId = 0;</span><br><span class="line"></span><br><span class="line">export const addTodo = text =&gt; (&#123;</span><br><span class="line">    type: ADD_TODO,</span><br><span class="line">    id: nextTodoId++,</span><br><span class="line">    text</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const setVisibilityFilter = (filter) =&gt; (&#123;</span><br><span class="line">    type: SET_VISIBILITY_FILTER,</span><br><span class="line">    filter</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const toggleTodo = id =&gt; (&#123;</span><br><span class="line">    type: TOGGLE_TODO,</span><br><span class="line">    id</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><strong><em>é‡Šï¼š</em></strong> </p><p><strong><em>Action åˆ›å»ºå‡½æ•°</em></strong> </p><p><code>Action</code> åˆ›å»ºå‡½æ•° å°±æ˜¯ç”Ÿæˆ <code>action</code> çš„æ–¹æ³•ã€‚â€œ<code>action</code>â€ å’Œ â€œ<code>action åˆ›å»ºå‡½æ•°</code>â€ è¿™ä¸¤ä¸ªæ¦‚å¿µå¾ˆå®¹æ˜“æ··åœ¨ä¸€èµ·ï¼Œä½¿ç”¨æ—¶æœ€å¥½æ³¨æ„åŒºåˆ†ã€‚</p><p>åœ¨ <code>Redux</code> ä¸­çš„ <code>action</code> åˆ›å»ºå‡½æ•°åªæ˜¯ç®€å•çš„è¿”å›ä¸€ä¸ª <code>action</code>:</p><hr><p><code>js/reducers/todos.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import  &#123;</span><br><span class="line">    ADD_TODO,</span><br><span class="line">    TOGGLE_TODO,</span><br><span class="line">&#125; from &apos;../actions/types&apos;</span><br><span class="line"></span><br><span class="line">const todos = (state = [], action) =&gt; &#123;</span><br><span class="line">    let &#123;id, text, type&#125; = action;</span><br><span class="line">    switch (type) &#123;</span><br><span class="line">        case ADD_TODO:</span><br><span class="line">            return [</span><br><span class="line">                ...state,</span><br><span class="line">                &#123;</span><br><span class="line">                    id: id,</span><br><span class="line">                    text: text,</span><br><span class="line">                    completed: false</span><br><span class="line">                &#125;</span><br><span class="line">            ];</span><br><span class="line">        case TOGGLE_TODO:</span><br><span class="line">            return state.map(todo =&gt; (todo.id === id) ? &#123;...todo, completed: !todo.completed&#125; : todo);</span><br><span class="line">        default:</span><br><span class="line">            return state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export  default  todos;</span><br></pre></td></tr></table></figure></p><p><code>js/reducers/visibilityFilter.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; SET_VISIBILITY_FILTER &#125; from &apos;../actions/types&apos;</span><br><span class="line">import &#123; visibilityFilters &#125; from &apos;../global&apos;</span><br><span class="line"></span><br><span class="line">const &#123; SHOW_ALL &#125; = visibilityFilters;</span><br><span class="line">const visibilityFilter = (state = SHOW_ALL, action) =&gt; &#123;</span><br><span class="line">    let &#123;type, filter&#125; = action;</span><br><span class="line">    switch (type)&#123;</span><br><span class="line">        case SET_VISIBILITY_FILTER:</span><br><span class="line">            return filter;</span><br><span class="line">        default:</span><br><span class="line">            return state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default  visibilityFilter;</span><br></pre></td></tr></table></figure></p><p><strong><em>é‡Šï¼š</em></strong> </p><p><strong><em><code>reducer</code> å°±æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ¥æ”¶æ—§çš„ <code>state</code> å’Œ <code>action</code>ï¼Œè¿”å›æ–°çš„ <code>state</code>ï¼ˆä¸Šé¢ä¸¤ä¸ªæ–‡ä»¶å¯ä»¥çœ‹ç€ä¸¤ä¸ª<code>reducer</code>ï¼‰ã€‚</em></strong> </p><p><strong><em>æ³¨æ„ï¼š</em></strong> </p><blockquote><ul><li><code>Redux</code> é¦–æ¬¡æ‰§è¡Œæ—¶ï¼Œ<code>state</code> ä¸º <code>undefined</code>ï¼Œæ­¤æ—¶éœ€è¦è®¾ç½®è¿”å›åº”ç”¨çš„åˆå§‹ <code>state</code>ã€‚</li><li>æ¯ä¸ª <code>reducer</code> åªè´Ÿè´£ç®¡ç†å…¨å±€ <code>state</code> ä¸­å®ƒè´Ÿè´£çš„ä¸€éƒ¨åˆ†ã€‚æ¯ä¸ª <code>reducer</code> çš„ <code>state</code> å‚æ•°éƒ½ä¸åŒï¼Œåˆ†åˆ«å¯¹åº”å®ƒç®¡ç†çš„é‚£éƒ¨åˆ† <code>state</code> æ•°æ®ã€‚</li></ul></blockquote><hr><p><code>js/reducers/index.js</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; combineReducers &#125; from &apos;redux&apos;</span><br><span class="line">import todos from &apos;./todos&apos;</span><br><span class="line">import visibilityFilter from &apos;./visibilityFilter&apos;</span><br><span class="line"></span><br><span class="line">export default combineReducers(&#123;</span><br><span class="line">    todos,</span><br><span class="line">    visibilityFilter</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong><em>é‡Šï¼š</em></strong> </p><p><strong>*<code>combineReducers()</code>æ‰€åšçš„åªæ˜¯ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥è°ƒç”¨ä½ çš„ä¸€ç³»åˆ— <code>reducer</code>ï¼Œæ¯ä¸ª <code>reducer</code> </strong>æ ¹æ®å®ƒä»¬çš„ key æ¥ç­›é€‰å‡º <code>state</code> ä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®å¹¶å¤„ç†<strong>ï¼Œç„¶åè¿™ä¸ªç”Ÿæˆçš„å‡½æ•°å†å°†æ‰€æœ‰ <code>reducer</code> çš„ç»“æœåˆå¹¶æˆä¸€ä¸ªå¤§çš„å¯¹è±¡ã€‚*</strong> </p><p>è¡¨é¢ä¸Šçœ‹ä¸Šå»<code>combineReducers()</code>çš„ä½œç”¨å°±æ˜¯æŠŠå¤šä¸ª<code>reducer</code>åˆæˆä¸€ä¸ªçš„<code>reducer</code>ã€‚</p><hr><p><code>js/components/Todo.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import &#123;</span><br><span class="line">    Text,</span><br><span class="line">    TouchableOpacity</span><br><span class="line">&#125; from &apos;react-native&apos;</span><br><span class="line">import PropTypes from &apos;prop-types&apos;</span><br><span class="line"></span><br><span class="line">export default class Todo extends Component &#123;</span><br><span class="line">    static propTypes = &#123;</span><br><span class="line">        onClick: PropTypes.func.isRequired,</span><br><span class="line">        completed: PropTypes.bool.isRequired,</span><br><span class="line">        text: PropTypes.string.isRequired</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    render()&#123;</span><br><span class="line">        let &#123; onClick, completed, text &#125; = this.props;</span><br><span class="line">        return (</span><br><span class="line">            &lt;TouchableOpacity</span><br><span class="line">                style=&#123;&#123;</span><br><span class="line">                    flexDirection: &apos;row&apos;,</span><br><span class="line">                    flex: 1,</span><br><span class="line">                    height: 50,</span><br><span class="line">                    alignItems: &apos;center&apos;,</span><br><span class="line">                    justifyContent: &apos;center&apos;,</span><br><span class="line">                    backgroundColor: &apos;#cccccc&apos;,</span><br><span class="line">                    marginTop: 10</span><br><span class="line">                &#125;&#125;</span><br><span class="line">                onPress=&#123;onClick&#125;&gt;</span><br><span class="line">                &lt;Text style=&#123;&#123; textDecorationLine: completed ? &apos;line-through&apos; : &apos;none&apos;&#125;&#125;&gt;&#123;text&#125;&lt;/Text&gt;</span><br><span class="line">            &lt;/TouchableOpacity&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>js/components/TodoList.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import PropTypes from &apos;prop-types&apos;</span><br><span class="line">import &#123;</span><br><span class="line">    FlatList</span><br><span class="line">&#125; from &apos;react-native&apos;</span><br><span class="line">import Todo from &apos;./Todo&apos;</span><br><span class="line"></span><br><span class="line">export default class TodoList extends Component &#123;</span><br><span class="line">    static propTypes = &#123;</span><br><span class="line">        todos: PropTypes.arrayOf(</span><br><span class="line">            PropTypes.shape(&#123;</span><br><span class="line">                id: PropTypes.number.isRequired,</span><br><span class="line">                completed: PropTypes.bool.isRequired,</span><br><span class="line">                text: PropTypes.string.isRequired</span><br><span class="line">            &#125;).isRequired</span><br><span class="line">        ).isRequired,</span><br><span class="line">        toggleTodo: PropTypes.func.isRequired</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _renderItem = (data) =&gt; &#123;</span><br><span class="line">       let dataItem = data.item;</span><br><span class="line">       let &#123; id &#125; = dataItem;</span><br><span class="line">       let &#123; toggleTodo &#125; = this.props;</span><br><span class="line">        return (</span><br><span class="line">            &lt;Todo</span><br><span class="line">                &#123;...dataItem&#125;</span><br><span class="line">                onClick=&#123;() =&gt; toggleTodo(id)&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        let &#123; todos &#125; = this.props;</span><br><span class="line">        return (</span><br><span class="line">            &lt;FlatList</span><br><span class="line">                data=&#123;todos&#125;</span><br><span class="line">                keyExtractor=&#123;(item)=&gt;item.id.toString()&#125;</span><br><span class="line">                renderItem=&#123;this._renderItem&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>js/components/Link.js.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import PropTypes from &apos;prop-types&apos;</span><br><span class="line">import &#123;</span><br><span class="line">    TouchableOpacity,</span><br><span class="line">    Text</span><br><span class="line">&#125; from &apos;react-native&apos;</span><br><span class="line"></span><br><span class="line">export default class Link extends Component &#123;</span><br><span class="line">    static propTypes = &#123;</span><br><span class="line">        active: PropTypes.bool.isRequired,</span><br><span class="line">        filter: PropTypes.string.isRequired,</span><br><span class="line">        onClick: PropTypes.func.isRequired</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        let &#123; active,  filter, onClick &#125; = this.props;</span><br><span class="line">        return (</span><br><span class="line">           &lt;TouchableOpacity</span><br><span class="line">               style=&#123;&#123;</span><br><span class="line">                   marginLeft: 4,</span><br><span class="line">                   height: 40,</span><br><span class="line">                   flex:1,</span><br><span class="line">                   borderWidth: 1,</span><br><span class="line">                   borderColor: &apos;#ccc&apos;,</span><br><span class="line">                   alignItems: &apos;center&apos;,</span><br><span class="line">                   justifyContent:&apos;center&apos;</span><br><span class="line">               &#125;&#125;</span><br><span class="line">               onPress=&#123;onClick&#125;</span><br><span class="line">           &gt;</span><br><span class="line">               &lt;Text style=&#123;&#123;fontSize: 10, color: active ? &apos;black&apos; : &apos;#cccccc&apos;&#125;&#125;&gt;&#123;filter&#125;&lt;/Text&gt;</span><br><span class="line">           &lt;/TouchableOpacity&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>js/components/Filters.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import &#123;</span><br><span class="line">    View,</span><br><span class="line">&#125; from &apos;react-native&apos;</span><br><span class="line">import FilterLink from &apos;../containers/FilterLink&apos;</span><br><span class="line">import &#123; visibilityFilters &#125; from &apos;../global&apos;</span><br><span class="line"></span><br><span class="line">const &#123; SHOW_ALL, SHOW_COMPLETED, SHOW_ACTIVE  &#125; = visibilityFilters;</span><br><span class="line"></span><br><span class="line">export default  class Filters extends Component &#123;</span><br><span class="line"></span><br><span class="line">    render()&#123;</span><br><span class="line">        return(</span><br><span class="line">            &lt;View style=&#123;&#123; flexDirection: &apos;row&apos;, marginTop: 20&#125;&#125;&gt;</span><br><span class="line">                &lt;FilterLink filter=&#123;SHOW_ALL&#125; /&gt;</span><br><span class="line">                &lt;FilterLink filter=&#123;SHOW_COMPLETED&#125; /&gt;</span><br><span class="line">                &lt;FilterLink filter=&#123;SHOW_ACTIVE&#125; /&gt;</span><br><span class="line">            &lt;/View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8cba09f881?w=800&amp;h=361&amp;f=png&amp;s=34551" alt="image.png"><br><strong><em>é‡Šï¼š</em></strong> </p><p><strong><em>ä»¥ä¸Šå››ä¸ªæ–‡ä»¶æ˜¯è‡ªå®šä¹‰çš„å››ä¸ªUIå±•ç¤ºç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶åªå®šä¹‰å¤–è§‚å¹¶ä¸å…³å¿ƒæ•°æ®æ¥æºå’Œå¦‚ä½•æ”¹å˜ã€‚ä¼ å…¥ä»€ä¹ˆå°±æ¸²æŸ“ä»€ä¹ˆã€‚å¦‚æœä½ æŠŠä»£ç ä» <code>Redux</code> è¿ç§»åˆ°åˆ«çš„æ¶æ„ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥ä¸åšä»»ä½•æ”¹åŠ¨ç›´æ¥ä½¿ç”¨ã€‚å®ƒä»¬å¹¶ä¸ä¾èµ–äº <code>Redux</code>ã€‚</em></strong> </p><hr><p><code>js/containers/AddTodo.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import &#123;</span><br><span class="line">    View,</span><br><span class="line">    TextInput,</span><br><span class="line">    Button,</span><br><span class="line">&#125; from &apos;react-native&apos;</span><br><span class="line">import &#123; connect &#125; from &apos;react-redux&apos;</span><br><span class="line">import &#123; addTodo &#125; from &apos;../actions&apos;</span><br><span class="line"></span><br><span class="line">class AddTodo extends Component &#123;</span><br><span class="line">    constructor(props)&#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.inputValue = &apos;&apos;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render()&#123;</span><br><span class="line">        let &#123; dispatch &#125; = this.props;</span><br><span class="line">        return (</span><br><span class="line">            &lt;View style=&#123;&#123;flexDirection: &apos;row&apos;&#125;&#125;&gt;</span><br><span class="line">                &lt;TextInput</span><br><span class="line">                    style=&#123;&#123;flex:1, borderWidth: 1, borderColor: &apos;#cccccc&apos;, textAlign: &apos;center&apos;&#125;&#125;</span><br><span class="line">                    onChangeText=&#123;text =&gt; this.inputValue = text&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">                &lt;Button title=&quot;Add Todo&quot; onPress=&#123;() =&gt; dispatch(addTodo(this.inputValue))&#125;/&gt;</span><br><span class="line">            &lt;/View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default connect()(AddTodo)</span><br></pre></td></tr></table></figure></p><p><code>js/containers/FilterLink.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &#123; connect &#125; from &apos;react-redux&apos;</span><br><span class="line">import &#123; setVisibilityFilter &#125; from &apos;../actions&apos;</span><br><span class="line">import Link from &apos;../components/Link&apos;</span><br><span class="line"></span><br><span class="line">const mapStateToProps = (state, ownProps) =&gt; (&#123;</span><br><span class="line">    active: ownProps.filter === state.visibilityFilter,</span><br><span class="line">    filterText: ownProps.filter</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const mapDispatchToProps = (dispatch, ownProps) =&gt; (&#123;</span><br><span class="line">    onClick: () =&gt; dispatch(setVisibilityFilter(ownProps.filter))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default connect(</span><br><span class="line">    mapStateToProps,</span><br><span class="line">    mapDispatchToProps,</span><br><span class="line">)(Link)</span><br></pre></td></tr></table></figure></p><p><code>js/containers/VisibleTodoList.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import &#123; connect &#125; from &apos;react-redux&apos;</span><br><span class="line">import &#123; toggleTodo &#125; from &apos;../actions&apos;</span><br><span class="line">import TodoList from &apos;../components/TodoList&apos;</span><br><span class="line">import &#123; visibilityFilters &#125; from &apos;../global&apos;</span><br><span class="line"></span><br><span class="line">const &#123; SHOW_ALL, SHOW_COMPLETED, SHOW_ACTIVE &#125; = visibilityFilters;</span><br><span class="line"></span><br><span class="line">const getVisibleTodos = (todos, filter) =&gt; &#123;</span><br><span class="line">    switch (filter) &#123;</span><br><span class="line">        case SHOW_COMPLETED:</span><br><span class="line">            return todos.filter(t =&gt; t.completed);</span><br><span class="line">        case SHOW_ACTIVE:</span><br><span class="line">            return todos.filter(t =&gt; !t.completed);</span><br><span class="line">        case SHOW_ALL:</span><br><span class="line">            return todos;</span><br><span class="line">        default:</span><br><span class="line">            throw new Error(&apos;Unknown filter: &apos; + filter)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const mapStateToProps = state =&gt; (&#123;</span><br><span class="line">    todos: getVisibleTodos(state.todos, state.visibilityFilter)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const mapDispatchToProps = dispatch =&gt; (&#123;</span><br><span class="line">    toggleTodo: id =&gt; dispatch(toggleTodo(id))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default connect(</span><br><span class="line">    mapStateToProps,</span><br><span class="line">    mapDispatchToProps,</span><br><span class="line">)(TodoList)</span><br></pre></td></tr></table></figure></p><p><strong><em>é‡Šï¼š</em></strong> </p><p><strong><em>ä»¥ä¸Šä¸‰ä¸ªæ˜¯å®¹å™¨ç»„ä»¶ï¼Œä½œç”¨æ˜¯æŠŠå±•ç¤ºç»„ä»¶è¿æ¥åˆ° <code>Redux</code>ã€‚<br>æ€»ä¹‹ï¼šåªè¦è®°ä½ä¸€å¥è¯å°±å¯ä»¥äº†ï¼šUIå±•ç¤ºç»„ä»¶è´Ÿè´£ UI çš„å‘ˆç°ï¼Œå®¹å™¨ç»„ä»¶è´Ÿè´£ç®¡ç†æ•°æ®å’Œé€»è¾‘ã€‚</em></strong><br>æœ‰æ—¶å¾ˆéš¾åˆ†æ¸…åˆ°åº•è¯¥ä½¿ç”¨å®¹å™¨ç»„ä»¶è¿˜æ˜¯å±•ç¤ºç»„ä»¶ã€‚å¦‚è¿™ä¸ªå°çš„ç»„ä»¶ï¼š</p><blockquote><ul><li><code>AddTodo.js</code> å«æœ‰â€œAddâ€æŒ‰é’® å’Œ è¾“å…¥æ¡† </li></ul></blockquote><p>æŠ€æœ¯ä¸Šè®²å¯ä»¥æŠŠå®ƒåˆ†æˆä¸¤ä¸ªç»„ä»¶ï¼Œä½†ä¸€å¼€å§‹å°±è¿™ä¹ˆåšæœ‰ç‚¹æ—©ã€‚åœ¨ä¸€äº›éå¸¸å°çš„ç»„ä»¶é‡Œæ··ç”¨å®¹å™¨å’Œå±•ç¤ºæ˜¯å¯ä»¥çš„ã€‚å½“ä¸šåŠ¡å˜å¤æ‚åï¼Œå¦‚ä½•æ‹†åˆ†å°±å¾ˆæ˜æ˜¾äº†ã€‚æ‰€ä»¥ç°åœ¨å°±ä½¿ç”¨æ··åˆå‹çš„å§ã€‚</p><p>ä¸Šé¢å‡ºç°äº†ä½¿ç”¨<code>react-redux</code>çš„<code>connect()</code>æ–¹æ³•æ¥æŠŠå±•ç¤ºç»„ä»¶å’Œå®¹å™¨ç»„ä»¶å…³è”åœ¨ä¸€èµ·ï¼Œè¿™ä¸ªæ–¹æ³•åšäº†æ€§èƒ½ä¼˜åŒ–æ¥é¿å…å¾ˆå¤šä¸å¿…è¦çš„é‡å¤æ¸²æŸ“ã€‚ï¼ˆè¿™æ ·ä½ å°±ä¸å¿…ä¸ºäº†æ€§èƒ½è€Œæ‰‹åŠ¨å®ç° <a href="https://doc.react-china.org/docs/optimizing-performance.html" target="_blank" rel="noopener">React æ€§èƒ½ä¼˜åŒ–å»ºè®®</a> ä¸­çš„ <code>shouldComponentUpdate</code> æ–¹æ³•ã€‚ï¼‰</p><p>ä½¿ç”¨ <code>connect()</code> å‰ï¼Œéœ€è¦å…ˆå®šä¹‰ <code>mapStateToProps</code> è¿™ä¸ªå‡½æ•°æ¥æŒ‡å®šå¦‚ä½•æŠŠå½“å‰ <code>Redux store state</code> æ˜ å°„åˆ°å±•ç¤ºç»„ä»¶çš„ <code>props</code> ä¸­ã€‚ä¾‹å¦‚ï¼Œ<code>VisibleTodoList</code> éœ€è¦è®¡ç®—ä¼ åˆ° <code>TodoList</code> ä¸­çš„ <code>todos</code>ï¼Œæ‰€ä»¥å®šä¹‰äº†æ ¹æ® <code>state.visibilityFilter</code> æ¥è¿‡æ»¤ <code>state.todos</code> çš„æ–¹æ³•ï¼Œå¹¶åœ¨ <code>mapStateToProps</code> ä¸­ä½¿ç”¨ã€‚</p><p>é™¤äº†è¯»å– <code>state</code>ï¼Œå®¹å™¨ç»„ä»¶è¿˜èƒ½åˆ†å‘ <code>action</code>ã€‚ç±»ä¼¼çš„æ–¹å¼ï¼Œå¯ä»¥å®šä¹‰ <code>mapDispatchToProps()</code> æ–¹æ³•æ¥æ”¶ <a href="https://cn.redux.js.org/docs/api/Store.html#dispatch" target="_blank" rel="noopener"><code>dispatch()</code></a> æ–¹æ³•å¹¶è¿”å›æœŸæœ›æ³¨å…¥åˆ°å±•ç¤ºç»„ä»¶çš„ props ä¸­çš„å›è°ƒæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ› <code>VisibleTodoList</code> å‘ <code>TodoList</code> ç»„ä»¶ä¸­æ³¨å…¥ä¸€ä¸ªå« <code>onTodoClick</code> çš„ props ï¼Œè¿˜å¸Œæœ› <code>onTodoClick</code>èƒ½åˆ†å‘ <code>TOGGLE_TODO</code> è¿™ä¸ª <code>action</code>ã€‚<br>æœ€åï¼Œä½¿ç”¨ <code>connect()</code> åˆ›å»º <code>VisibleTodoList</code>ï¼Œå¹¶ä¼ å…¥è¿™ä¸¤ä¸ªå‡½æ•°ã€‚</p><hr><p><code>js/components/Group.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import &#123;</span><br><span class="line">    View</span><br><span class="line">&#125; from &apos;react-native&apos;</span><br><span class="line">import AddTodo from &apos;../containers/AddTodo&apos;</span><br><span class="line">import Filters from &apos;../components/Filters&apos;</span><br><span class="line">import VisibleTodoList from &apos;../containers/VisibleTodoList&apos;</span><br><span class="line"></span><br><span class="line">export default class Group extends Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;View style=&#123;&#123;paddingHorizontal: 20, paddingVertical: 44&#125;&#125;&gt;</span><br><span class="line">                &lt;AddTodo/&gt;</span><br><span class="line">                &lt;Filters/&gt;</span><br><span class="line">                &lt;VisibleTodoList/&gt;</span><br><span class="line">            &lt;/View&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong><em>é‡Šï¼š</em></strong> </p><p><strong><em><code>Group.js</code> æ˜¯æŠŠæ‰€æœ‰çš„å…³è”åçš„ç»„ä»¶ä¸²èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„ç•Œé¢ã€‚</em></strong> </p><hr><p><code>App.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import &#123; createStore &#125; from &apos;redux&apos;</span><br><span class="line">import &#123; Provider &#125; from &apos;react-redux&apos;</span><br><span class="line">import Group from &apos;./js/components/Group&apos;</span><br><span class="line">import rootReducer from &apos;./js/reducers&apos;</span><br><span class="line"></span><br><span class="line">export default class App extends Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        const store = createStore(rootReducer);</span><br><span class="line">        return (</span><br><span class="line">            &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">                &lt;Group /&gt;</span><br><span class="line">            &lt;/Provider&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong><em>é‡Šï¼š</em></strong> </p><p><strong><em>å…¥å£æ–‡ä»¶ä¼ å…¥ <code>Store</code></em></strong> </p><ul><li>åˆ›å»º<code>store</code>ä¼ å…¥<code>reducers</code>ã€‚</li><li>ä½¿ç”¨<code>Provider</code>ç»„ä»¶åŒ…è£¹   <code>Group</code>ç»„ä»¶, <code>store</code>ä½œä¸ºå±æ€§ä¼ å…¥<code>Provider</code>ã€‚</li></ul><hr><p>è¿›è¡Œåˆ°è¿™ä¸€æ­¥ï¼Œä»£ç åˆ†æå®Œæ¯•ã€‚æœ¬æ¬¡å†™ä½œåˆ°æ­¤ç»“æŸã€‚æˆ‘ç›¸ä¿¡å¤§å®¶å¦‚æœä»”ç»†çœ‹å®Œçš„è¯ï¼Œå¤šå¤šå°‘å°‘ä¼šæœ‰äº›æ”¶è·å§ï¼Œå¦‚æœ<code>demo</code>çœ‹ä¸å¤ªæ‡‚ï¼Œé‚£å°±è·Ÿç€ä»£ç åˆ†æçš„æ€è·¯å¤šæ•²å‡ éä»£ç ï¼Œä¹Ÿå°±ç†è§£äº†ï¼Œæœ‰ç©ºæˆ‘ä¼šç»§ç»­æ›´æ–°æœªå®Œæˆçš„å†…å®¹ã€‚</p><h4 id="ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸"><a href="#ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸" class="headerlink" title="ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸"></a>ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸</h4><h4 id="â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸åä¸½çš„åˆ†å‰²çº¿â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸"><a href="#â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸åä¸½çš„åˆ†å‰²çº¿â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸" class="headerlink" title="â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸åä¸½çš„åˆ†å‰²çº¿â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸"></a>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸åä¸½çš„åˆ†å‰²çº¿â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</h4><h4 id="ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸-1"><a href="#ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸-1" class="headerlink" title="ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸"></a>ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸ã€°ï¸</h4><p>ç¦»ä¸Šæ¬¡æ›´æ–°å·²ç»æœ‰å¥½å‡ å¤©äº†ï¼Œä»Šå¤©æŠ½ç©ºæ›´æ–°çš„å†…å®¹æ˜¯<code>Middleware</code>ï¼ˆä¸­é—´ä»¶ï¼‰ã€‚</p><h1 id="Middlewareï¼ˆä¸­é—´ä»¶ï¼‰çš„ä½œç”¨"><a href="#Middlewareï¼ˆä¸­é—´ä»¶ï¼‰çš„ä½œç”¨" class="headerlink" title="Middlewareï¼ˆä¸­é—´ä»¶ï¼‰çš„ä½œç”¨"></a>Middlewareï¼ˆä¸­é—´ä»¶ï¼‰çš„ä½œç”¨</h1><p><code>Middleware</code>æ˜¯åœ¨<code>Actions</code>å’Œ<code>Dispatcher</code>ä¹‹é—´åµŒå…¥çš„ä¸ºäº†è§£å†³æŸäº›é—®é¢˜ã€æé«˜æˆ‘ä»¬å¼€å‘æ•ˆç‡è€Œå­˜åœ¨çš„å·¥å…·ã€‚<br>ä¸‹é¢ä»‹ç»ä¸‰ç§å¸¸ç”¨çš„ä¸­é—´ä»¶ï¼š</p><ul><li><a href="https://github.com/reduxjs/redux-thunk" target="_blank" rel="noopener">redux-thunk</a> ä¸­é—´ä»¶ï¼šé¡¹ç›®ä¸­çš„å¼‚æ­¥æ“ä½œéœ€è¦ç”¨åˆ°ï¼ˆä¾‹å¦‚ï¼šè¯·æ±‚æœåŠ¡å™¨æ•°æ®ã€æœ¬åœ°å­˜å‚¨ç­‰ï¼‰ã€‚</li><li><a href="https://github.com/redux-utilities/redux-actions" target="_blank" rel="noopener">redux-actions</a> ä¸­é—´ä»¶ï¼šå¸®åŠ©å¤„ç†å’Œåˆ›å»ºæ“ä½œ<code>actions</code>ï¼ˆæœ¬æ–‡ä¸åšä»‹ç»ï¼Œåç»­é¡¹ç›®å¤æ‚åå¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºï¼‰ã€‚</li><li><a href="https://github.com/evgenyrodionov/redux-logger" target="_blank" rel="noopener">redux-logger</a> ä¸­é—´ä»¶ï¼šç”¨æ¥æ‰“å° <code>action</code> æ—¥å¿—ã€‚<br>å¼€å¯<code>react native</code>è¿œç¨‹è°ƒè¯•æ¨¡å¼ï¼Œæ“ä½œdemoå°±èƒ½åœ¨æ§åˆ¶å°çœ‹åˆ°æ‰“å°çš„çŠ¶æ€å‰åå˜åŒ–ã€‚<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8cbb6e7726?w=800&amp;h=189&amp;f=png&amp;s=106312" alt="çŠ¶æ€æ—¥å¿—"></li></ul><p>åŠ å…¥ä¸­é—´ä»¶åçš„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š<br><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8cdaebba77?w=1440&amp;h=1080&amp;f=gif&amp;s=2805887" alt="åŠ å…¥ä¸­é—´ä»¶åçš„ç¤ºæ„å›¾"></p><h1 id="æ ¸å¿ƒä»£ç è¯¦è§£"><a href="#æ ¸å¿ƒä»£ç è¯¦è§£" class="headerlink" title="æ ¸å¿ƒä»£ç è¯¦è§£"></a>æ ¸å¿ƒä»£ç è¯¦è§£</h1><p>æœ¬æ¬¡<code>demo</code>ä»£ç è®²è§£ä¸ºäº†å‡å°‘æ–‡ç« ç¯‡å¹…ï¼Œåªä¼šè®²è§£æ¶‰åŠåˆ°<code>Middleware</code>çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>demo</code>ä¸­åœ¨<code>reducers</code> ã€<code>components</code> ã€<code>containers</code>æ–‡ä»¶åŠ ä¸‹æ–°å¢çš„æ–‡ä»¶ä¸ä¼šåšè¿‡å¤šçš„è§£é‡Šï¼Œå¦‚æœä¸ç†è§£ï¼Œå¯ä»¥è¿”å›å»æŠŠç¬¬ä¸€æ¬¡æ›´æ–°çš„å†…å®¹å†è§£æä¸€éã€‚</p><p><code>actions/types.js</code>æ–°å¢å¦‚ä¸‹ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//è¯·æ±‚å¸–å­åˆ—è¡¨</span><br><span class="line">export const REQUEST_POSTS = &apos;REQUEST_POSTS&apos;;</span><br><span class="line">//å¸–å­è¿”å›æ•°æ®</span><br><span class="line">export const RECEIVE_POSTS = &apos;RECEIVE_POSTS&apos;;</span><br><span class="line">//åˆ‡æ¢æ•°æ®æº</span><br><span class="line">export const SELECT_SUBREDDIT = &apos;SELECT_SUBREDDIT&apos;;</span><br><span class="line">//ä½¿ç¼“å­˜è¿‡æœŸå¤±æ•ˆ</span><br><span class="line">export const INVALIDATE_SUBREDDIT = &apos;INVALIDATE_SUBREDDIT&apos;;</span><br></pre></td></tr></table></figure></p><p><code>actions/index.js</code>æ–°å¢å¦‚ä¸‹ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">export const selectSubreddit = subreddit =&gt; (&#123;</span><br><span class="line">    type: SELECT_SUBREDDIT,</span><br><span class="line">    subreddit</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const invalidateSubreddit = subreddit =&gt; (&#123;</span><br><span class="line">    type: INVALIDATE_SUBREDDIT,</span><br><span class="line">    subreddit</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const requestPosts = subreddit =&gt; (&#123;</span><br><span class="line">    type: REQUEST_POSTS,</span><br><span class="line">    subreddit</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const receivePosts = (subreddit, json) =&gt; (&#123;</span><br><span class="line">    type: RECEIVE_POSTS,</span><br><span class="line">    subreddit,</span><br><span class="line">    posts: json.data,</span><br><span class="line">    receivedAt: Date.now()</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const fetchPosts = subreddit =&gt; dispatch =&gt; &#123;</span><br><span class="line">    // API å‘èµ·è¯·æ±‚</span><br><span class="line">    dispatch(requestPosts(subreddit));</span><br><span class="line">    return fetch(`http://localhost:8081/data/$&#123;subreddit&#125;.json`)</span><br><span class="line">        .then(response =&gt; response.json())</span><br><span class="line">        .then(json =&gt; &#123;</span><br><span class="line">            setTimeout(()=&gt;&#123;</span><br><span class="line">                //ä½¿ç”¨ API è¯·æ±‚ç»“æœæ¥æ›´æ–°åº”ç”¨çš„ state</span><br><span class="line">                dispatch(receivePosts(subreddit, json))</span><br><span class="line">            &#125;,2000);</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const shouldFetchPosts = (state, subreddit) =&gt; &#123;</span><br><span class="line">    const posts = state.postsBySubreddit[subreddit];</span><br><span class="line">    if (!posts) &#123;</span><br><span class="line">        return true</span><br><span class="line">    &#125;</span><br><span class="line">    if (posts.isFetching) &#123;</span><br><span class="line">        return false</span><br><span class="line">    &#125;</span><br><span class="line">    return posts.didInvalidate</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const fetchPostsIfNeeded = subreddit =&gt; (dispatch, getState) =&gt; &#123;</span><br><span class="line">    if (shouldFetchPosts(getState(), subreddit)) &#123;</span><br><span class="line">        return dispatch(fetchPosts(subreddit))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p><strong><em>é‡Š</em></strong></p><p><strong><em>ä»¥ä¸Šä¸»è¦éœ€è¦æ³¨æ„çš„æ˜¯</em></strong></p><blockquote><ul><li><code>fetchPosts</code>è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œè€Œæ™®é€šçš„ <code>Action åˆ›å»ºå‡½æ•°</code> é»˜è®¤è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</li><li>è¿”å›çš„å‡½æ•°çš„å‚æ•°æ˜¯<code>dispatch</code>å’Œ<code>getState</code>è¿™ä¸¤ä¸ª <code>Redux</code> æ–¹æ³•ï¼Œæ™®é€šçš„ <code>Action åˆ›å»ºå‡½æ•°</code> çš„å‚æ•°æ˜¯ <code>Action</code> çš„å†…å®¹ã€‚</li><li>åœ¨è¿”å›çš„å‡½æ•°ä¹‹ä¸­ï¼Œå…ˆå‘å‡ºä¸€ä¸ª <code>Action</code>: <strong>dispatch(requestPosts(subreddit))</strong>ï¼Œè¡¨ç¤ºæ“ä½œå¼€å§‹ã€‚</li><li>å¼‚æ­¥æ“ä½œç»“æŸä¹‹åï¼Œå†å‘å‡ºä¸€ä¸ª <code>Action</code>: <strong>receivePosts(subreddit, json)</strong>ï¼Œè¡¨ç¤ºæ“ä½œç»“æŸã€‚</li></ul></blockquote><p><strong><em>demoä¸­æ•°æ®æºè§£é‡Šï¼š</em></strong></p><blockquote><p>æœ¬æ¥æ‰“ç®—ç”¨å®˜æ–¹çš„ <a href="https://codesandbox.io/s/github/reactjs/redux/tree/master/examples/async" target="_blank" rel="noopener">reddit demo</a> APIï¼Œæœ€ç»ˆå‘ç°å®˜æ–¹ç»™å‡ºçš„<code>demo</code>è¯·æ±‚æ•°æ®ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥ä½¿ç”¨äº†æœ¬åœ°çš„jsonæ•°æ®ï¼Œå»¶è¿Ÿä¸¤ç§’æ¨¡æ‹Ÿç½‘ç»œAPIåŠ è½½æ•°æ®çš„è¿‡ç¨‹ã€‚</p></blockquote><p><img src="https://user-gold-cdn.xitu.io/2018/10/9/16657c8ce37f8bca?w=800&amp;h=317&amp;f=png&amp;s=72682" alt="å®˜æ–¹æä¾›çš„redditAPIæ— æ³•ä½¿ç”¨"></p><hr><p><code>App.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import &#123; applyMiddleware, createStore &#125; from &apos;redux&apos;</span><br><span class="line">import &#123; createLogger &#125; from &apos;redux-logger&apos;</span><br><span class="line">import &#123; Provider &#125; from &apos;react-redux&apos;</span><br><span class="line">import thunk from &apos;redux-thunk&apos;</span><br><span class="line">import LoadPosts from &apos;./js/containers/LoadPosts&apos;</span><br><span class="line">import rootReducer from &apos;./js/reducers&apos;</span><br><span class="line"></span><br><span class="line">export default class App extends Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        const logger = createLogger();</span><br><span class="line">        const store = createStore(</span><br><span class="line">            rootReducer,</span><br><span class="line">            applyMiddleware(thunk, logger)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        return (</span><br><span class="line">            &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">                &lt;LoadPosts/&gt;</span><br><span class="line">            &lt;/Provider&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong><em>é‡Š</em></strong></p><p>ç›¸æ¯”å‰ä¸€ä¸ª<code>demo</code>çš„<code>App.js</code>ï¼Œåœ¨<code>createStore</code>çš„æ—¶å€™å‚æ•°æœ‰å˜åŒ–ï¼Œå¤šäº†ä¸€ä¸ª<code>applyMiddleware(thunk, logger)</code>ä¸­é—´ä»¶çš„å‚æ•°ã€‚<br>ç†è§£äº†ç¬¬ä¸€æ¬¡æ›´æ–°å†…å®¹çš„ç«¥é‹ä¸éš¾çœ‹å‡ºï¼Œ<code>Action</code> æ˜¯ç”±<code>store.dispatch</code>æ–¹æ³•å‘é€çš„ã€‚è€Œ<code>store.dispatch</code>æ–¹æ³•æ­£å¸¸æƒ…å†µä¸‹ï¼Œå‚æ•°åªèƒ½æ˜¯å¯¹è±¡ï¼Œä¸èƒ½æ˜¯å‡½æ•°ã€‚<br>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦ä½¿ç”¨åˆ°ä¸­é—´ä»¶<a href="https://github.com/gaearon/redux-thunk" target="_blank" rel="noopener"><code>redux-thunk</code></a>æ”¹é€ <code>store.dispatch</code>ï¼Œä½¿<code>store.dispatch</code>å¯ä»¥æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°ã€‚</p><p><strong><em>æ³¨æ„</em></strong></p><blockquote><p>æœ‰çš„ä¸­é—´ä»¶æœ‰æ¬¡åºè¦æ±‚ï¼Œä½¿ç”¨å‰è¦æŸ¥ä¸€ä¸‹æ–‡æ¡£ã€‚æ¯”å¦‚ï¼Œloggerå°±ä¸€å®šè¦æ”¾åœ¨æœ€åï¼Œå¦åˆ™è¾“å‡ºç»“æœä¼šä¸æ­£ç¡®ã€‚</p></blockquote><hr><h3 id="å¾…æ›´æ–°å†…å®¹"><a href="#å¾…æ›´æ–°å†…å®¹" class="headerlink" title="å¾…æ›´æ–°å†…å®¹"></a>å¾…æ›´æ–°å†…å®¹</h3><ul><li><code>redux</code> é…åˆ <code>react-navigation</code> ä½¿ç”¨ã€‚</li><li>â€¦â€¦</li></ul><h1 id="å½©è›‹"><a href="#å½©è›‹" class="headerlink" title="å½©è›‹"></a>å½©è›‹</h1><p>é™„ä¸Š  <a href="https://github.com/giantss/ReduxForReactNativeDemo" target="_blank" rel="noopener">demo</a>  ï¼Œæ¬¢è¿â¤ï¸â­ï¸ğŸ‘æŒ‡å‡ºé”™è¯¯æˆ–è€…å‘å¸ƒè‡ªå·±çš„è§è§£æ¢è®¨ï¼Œå…±å‹‰ã€‚ğŸ¤</p><p><strong><em>æ³¨æ„</em></strong></p><p>å¦‚ <code>clone</code> ä¸‹æ¥çš„demoæœ‰ä¸¤ä¸ª <code>tag</code>ï¼Œç›´æ¥è¿è¡Œçš„è¯ï¼Œé»˜è®¤çœ‹åˆ°æ˜¯ç¬¬äºŒæ¬¡æ›´æ–°çš„å†…å®¹ <code>demo</code>ã€‚</p><p>ä¸¤ç§æ–¹å¼åˆ‡æ¢åˆ°ç¬¬ä¸€æ¬¡æ›´æ–°çš„ <code>demo</code>å†…å®¹ï¼š</p><ul><li>ç¬¬ä¸€ç§ï¼šæ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code>git checkout -b dev v0.1</code></li><li>ç¬¬äºŒç§ï¼šå°† <code>App.js</code>ä¸­ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">   &#123;/*&lt;Group /&gt;*/&#125; //æ³¨é‡Šæ‰“å¼€</span><br><span class="line">   &lt;LoadPosts/&gt; //æ³¨é‡Šæ‰</span><br><span class="line">&lt;/Provider&gt;</span><br></pre></td></tr></table></figure></li></ul><p>hello <a href="https://giantss.github.io/blog/2018/09/27/Redux-for-react-native-æŒ‡å—-æŒç»­æ›´æ–°/">https://giantss.github.io/blog/2018/09/27/Redux-for-react-native-æŒ‡å—-æŒç»­æ›´æ–°/</a> bye</p>]]></content>
      
      
      
        <tags>
            
            <tag> react native </tag>
            
            <tag> Redux </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
